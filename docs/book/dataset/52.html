<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQ1046877154ï¼Œå¾®ä¿¡loveu_110è·å–</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                52è®²ç®—æ³•å®æˆ˜ï¼ˆä¸€ï¼‰ï¼šå‰–æRediså¸¸ç”¨æ•°æ®ç±»å‹å¯¹åº”çš„æ•°æ®ç»“æ„
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/29/58/29ba6073707a716c78fde2495c543158.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸“æ å‰ä¸‰éƒ¨åˆ†æˆ‘ä»¬å…¨éƒ¨è®²å®Œäº†ã€‚ä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä»¬å°±æ­£å¼è¿›å…¥å®æˆ˜ç¯‡çš„éƒ¨åˆ†ã€‚è¿™éƒ¨åˆ†æˆ‘ä¸»è¦é€šè¿‡ä¸€äº›å¼€æºé¡¹ç›®ã€ç»å…¸ç³»ç»Ÿï¼ŒçœŸæªå®å¼¹åœ°æ•™ä½ ï¼Œå¦‚ä½•å°†æ•°æ®ç»“æ„å’Œç®—æ³•åº”ç”¨åˆ°é¡¹ç›®ä¸­ã€‚æ‰€ä»¥è¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œæ›´å¤šçš„æ˜¯çŸ¥è¯†ç‚¹çš„å›é¡¾ï¼Œç›¸å¯¹äºåŸºç¡€ç¯‡ã€é«˜çº§ç¯‡çš„å†…å®¹ï¼Œå…¶å®è¿™éƒ¨åˆ†ä¼šæ›´åŠ å®¹æ˜“çœ‹æ‡‚ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘å¸Œæœ›ä½ ä¸è¦åªæ˜¯çœ‹æ‡‚å°±å®Œäº†ã€‚ä½ è¦å¤šä¸¾ä¸€åä¸‰åœ°æ€è€ƒï¼Œè‡ªå·±æ¥è§¦è¿‡çš„å¼€æºé¡¹ç›®ã€åŸºç¡€æ¡†æ¶ã€ä¸­é—´ä»¶ä¸­ï¼Œéƒ½ç”¨è¿‡å“ªäº›æ•°æ®ç»“æ„å’Œç®—æ³•ã€‚ä½ ä¹Ÿå¯ä»¥æƒ³ä¸€æƒ³ï¼Œåœ¨è‡ªå·±åšçš„é¡¹ç›®ä¸­ï¼Œæœ‰å“ªäº›å¯ä»¥ç”¨å­¦è¿‡çš„æ•°æ®ç»“æ„å’Œç®—æ³•è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚è¿™æ ·çš„å­¦ä¹ æ•ˆæœæ‰ä¼šæ›´å¥½ã€‚</p><p>å¥½äº†ï¼Œä»Šå¤©æˆ‘å°±å¸¦ä½ ä¸€å—å„¿çœ‹ä¸‹ï¼Œ<strong><span class="orange">ç»å…¸æ•°æ®åº“Redisä¸­çš„å¸¸ç”¨æ•°æ®ç±»å‹ï¼Œåº•å±‚éƒ½æ˜¯ç”¨å“ªç§æ•°æ®ç»“æ„å®ç°çš„ï¼Ÿ</span></strong></p><h2>Redisæ•°æ®åº“ä»‹ç»</h2><p>Redisæ˜¯ä¸€ç§é”®å€¼ï¼ˆKey-Valueï¼‰æ•°æ®åº“ã€‚ç›¸å¯¹äºå…³ç³»å‹æ•°æ®åº“ï¼ˆæ¯”å¦‚MySQLï¼‰ï¼ŒRedisä¹Ÿè¢«å«ä½œ<strong>éå…³ç³»å‹æ•°æ®åº“</strong>ã€‚</p><p>åƒMySQLè¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ï¼Œè¡¨çš„ç»“æ„æ¯”è¾ƒå¤æ‚ï¼Œä¼šåŒ…å«å¾ˆå¤šå­—æ®µï¼Œå¯ä»¥é€šè¿‡SQLè¯­å¥ï¼Œæ¥å®ç°éå¸¸å¤æ‚çš„æŸ¥è¯¢éœ€æ±‚ã€‚è€ŒRedisä¸­åªåŒ…å«â€œé”®â€å’Œâ€œå€¼â€ä¸¤éƒ¨åˆ†ï¼Œåªèƒ½é€šè¿‡â€œé”®â€æ¥æŸ¥è¯¢â€œå€¼â€ã€‚æ­£æ˜¯å› ä¸ºè¿™æ ·ç®€å•çš„å­˜å‚¨ç»“æ„ï¼Œä¹Ÿè®©Redisçš„è¯»å†™æ•ˆç‡éå¸¸é«˜ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒRedisä¸»è¦æ˜¯ä½œä¸ºå†…å­˜æ•°æ®åº“æ¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ã€‚å°½ç®¡å®ƒç»å¸¸è¢«ç”¨ä½œå†…å­˜æ•°æ®åº“ï¼Œä½†æ˜¯ï¼Œå®ƒä¹Ÿæ”¯æŒå°†æ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­ã€‚è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åé¢ä¼šä»‹ç»ã€‚</p><!-- [[[read_end]]] --><p>Redisä¸­ï¼Œé”®çš„æ•°æ®ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸ºäº†ä¸°å¯Œæ•°æ®å­˜å‚¨çš„æ–¹å¼ï¼Œæ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ï¼Œå€¼çš„æ•°æ®ç±»å‹æœ‰å¾ˆå¤šï¼Œå¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰è¿™æ ·å‡ ç§ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å­—å…¸ã€é›†åˆã€æœ‰åºé›†åˆã€‚</p><p>â€œå­—ç¬¦ä¸²ï¼ˆstringï¼‰â€è¿™ç§æ•°æ®ç±»å‹éå¸¸ç®€å•ï¼Œå¯¹åº”åˆ°æ•°æ®ç»“æ„é‡Œï¼Œå°±æ˜¯<strong>å­—ç¬¦ä¸²</strong>ã€‚ä½ åº”è¯¥éå¸¸ç†Ÿæ‚‰ï¼Œè¿™é‡Œæˆ‘å°±ä¸å¤šä»‹ç»äº†ã€‚æˆ‘ä»¬ç€é‡çœ‹ä¸‹ï¼Œå…¶ä»–å››ç§æ¯”è¾ƒå¤æ‚ç‚¹çš„æ•°æ®ç±»å‹ï¼Œçœ‹çœ‹å®ƒä»¬åº•å±‚éƒ½ä¾èµ–äº†å“ªäº›æ•°æ®ç»“æ„ã€‚</p><h2>åˆ—è¡¨ï¼ˆlistï¼‰</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹åˆ—è¡¨ã€‚åˆ—è¡¨è¿™ç§æ•°æ®ç±»å‹æ”¯æŒå­˜å‚¨ä¸€ç»„æ•°æ®ã€‚è¿™ç§æ•°æ®ç±»å‹å¯¹åº”ä¸¤ç§å®ç°æ–¹æ³•ï¼Œä¸€ç§æ˜¯<strong>å‹ç¼©åˆ—è¡¨</strong>ï¼ˆziplistï¼‰ï¼Œå¦ä¸€ç§æ˜¯åŒå‘å¾ªç¯é“¾è¡¨ã€‚</p><p>å½“åˆ—è¡¨ä¸­å­˜å‚¨çš„æ•°æ®é‡æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œåˆ—è¡¨å°±å¯ä»¥é‡‡ç”¨å‹ç¼©åˆ—è¡¨çš„æ–¹å¼å®ç°ã€‚å…·ä½“éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ul>
<li>
<p>åˆ—è¡¨ä¸­ä¿å­˜çš„å•ä¸ªæ•°æ®ï¼ˆæœ‰å¯èƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼‰å°äº64å­—èŠ‚ï¼›</p>
</li>
<li>
<p>åˆ—è¡¨ä¸­æ•°æ®ä¸ªæ•°å°‘äº512ä¸ªã€‚</p>
</li>
</ul><p>å…³äºå‹ç¼©åˆ—è¡¨ï¼Œæˆ‘è¿™é‡Œç¨å¾®è§£é‡Šä¸€ä¸‹ã€‚å®ƒå¹¶ä¸æ˜¯åŸºç¡€æ•°æ®ç»“æ„ï¼Œè€Œæ˜¯Redisè‡ªå·±è®¾è®¡çš„ä¸€ç§æ•°æ®å­˜å‚¨ç»“æ„ã€‚å®ƒæœ‰ç‚¹å„¿ç±»ä¼¼æ•°ç»„ï¼Œé€šè¿‡ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨æ•°æ®ã€‚ä¸è¿‡ï¼Œå®ƒè·Ÿæ•°ç»„ä¸åŒçš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒå…è®¸å­˜å‚¨çš„æ•°æ®å¤§å°ä¸åŒã€‚å…·ä½“çš„å­˜å‚¨ç»“æ„ä¹Ÿéå¸¸ç®€å•ï¼Œä½ å¯ä»¥çœ‹æˆ‘ä¸‹é¢ç”»çš„è¿™å¹…å›¾ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/49/b5/49fd8d46eb94f463ace98717f11c2cb5.jpg" alt=""></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå‹ç¼©åˆ—è¡¨ä¸­çš„â€œå‹ç¼©â€ä¸¤ä¸ªå­—è¯¥å¦‚ä½•ç†è§£ï¼Ÿ</p><p>å¬åˆ°â€œå‹ç¼©â€ä¸¤ä¸ªå­—ï¼Œç›´è§‚çš„ååº”å°±æ˜¯èŠ‚çœå†…å­˜ã€‚ä¹‹æ‰€ä»¥è¯´è¿™ç§å­˜å‚¨ç»“æ„èŠ‚çœå†…å­˜ï¼Œæ˜¯ç›¸è¾ƒäºæ•°ç»„çš„å­˜å‚¨æ€è·¯è€Œè¨€çš„ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ•°ç»„è¦æ±‚æ¯ä¸ªå…ƒç´ çš„å¤§å°ç›¸åŒï¼Œå¦‚æœæˆ‘ä»¬è¦å­˜å‚¨ä¸åŒé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ç”¨æœ€å¤§é•¿åº¦çš„å­—ç¬¦ä¸²å¤§å°ä½œä¸ºå…ƒç´ çš„å¤§å°ï¼ˆå‡è®¾æ˜¯20ä¸ªå­—èŠ‚ï¼‰ã€‚é‚£å½“æˆ‘ä»¬å­˜å‚¨å°äº20ä¸ªå­—èŠ‚é•¿åº¦çš„å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¾¿ä¼šæµªè´¹éƒ¨åˆ†å­˜å‚¨ç©ºé—´ã€‚å¬èµ·æ¥æœ‰ç‚¹å„¿æ‹—å£ï¼Œæˆ‘ç”»ä¸ªå›¾è§£é‡Šä¸€ä¸‹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/2e/69/2e2f2e5a2fe25d26dc2fc04cfe88f869.jpg" alt=""></p><p>å‹ç¼©åˆ—è¡¨è¿™ç§å­˜å‚¨ç»“æ„ï¼Œä¸€æ–¹é¢æ¯”è¾ƒèŠ‚çœå†…å­˜ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥æ”¯æŒä¸åŒç±»å‹æ•°æ®çš„å­˜å‚¨ã€‚è€Œä¸”ï¼Œå› ä¸ºæ•°æ®å­˜å‚¨åœ¨ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œé€šè¿‡é”®æ¥è·å–å€¼ä¸ºåˆ—è¡¨ç±»å‹çš„æ•°æ®ï¼Œè¯»å–çš„æ•ˆç‡ä¹Ÿéå¸¸é«˜ã€‚</p><p>å½“åˆ—è¡¨ä¸­å­˜å‚¨çš„æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½åŒæ—¶æ»¡è¶³åˆšåˆšè®²çš„ä¸¤ä¸ªæ¡ä»¶çš„æ—¶å€™ï¼Œåˆ—è¡¨å°±è¦é€šè¿‡åŒå‘å¾ªç¯é“¾è¡¨æ¥å®ç°äº†ã€‚</p><p>åœ¨<a href="https://time.geekbang.org/column/article/41013">é“¾è¡¨</a>é‡Œï¼Œæˆ‘ä»¬å·²ç»è®²è¿‡åŒå‘å¾ªç¯é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„äº†ï¼Œå¦‚æœä¸è®°å¾—äº†ï¼Œä½ å¯ä»¥å…ˆå›å»å¤ä¹ ä¸€ä¸‹ã€‚è¿™é‡Œæˆ‘ä»¬ç€é‡çœ‹ä¸€ä¸‹Redisä¸­åŒå‘é“¾è¡¨çš„ç¼–ç å®ç°æ–¹å¼ã€‚</p><p>Redisçš„è¿™ç§åŒå‘é“¾è¡¨çš„å®ç°æ–¹å¼ï¼Œéå¸¸å€¼å¾—å€Ÿé‰´ã€‚å®ƒé¢å¤–å®šä¹‰ä¸€ä¸ªlistç»“æ„ä½“ï¼Œæ¥ç»„ç»‡é“¾è¡¨çš„é¦–ã€å°¾æŒ‡é’ˆï¼Œè¿˜æœ‰é•¿åº¦ç­‰ä¿¡æ¯ã€‚è¿™æ ·ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å°±ä¼šéå¸¸æ–¹ä¾¿ã€‚</p><pre><code>// ä»¥ä¸‹æ˜¯Cè¯­è¨€ä»£ç ï¼Œå› ä¸ºRedisæ˜¯ç”¨Cè¯­è¨€å®ç°çš„ã€‚
typedef struct listnode {
  struct listNode *prev;
  struct listNode *next;
  void *value;
} listNode;


typedef struct list {
  listNode *head;
  listNode *tail;
  unsigned long len;
  // ....çœç•¥å…¶ä»–å®šä¹‰
} list;
</code></pre><h2>å­—å…¸ï¼ˆhashï¼‰</h2><p>å­—å…¸ç±»å‹ç”¨æ¥å­˜å‚¨ä¸€ç»„æ•°æ®å¯¹ã€‚æ¯ä¸ªæ•°æ®å¯¹åˆåŒ…å«é”®å€¼ä¸¤éƒ¨åˆ†ã€‚å­—å…¸ç±»å‹ä¹Ÿæœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚ä¸€ç§æ˜¯æˆ‘ä»¬åˆšåˆšè®²åˆ°çš„<strong>å‹ç¼©åˆ—è¡¨</strong>ï¼Œå¦ä¸€ç§æ˜¯<strong>æ•£åˆ—è¡¨</strong>ã€‚</p><p>åŒæ ·ï¼Œåªæœ‰å½“å­˜å‚¨çš„æ•°æ®é‡æ¯”è¾ƒå°çš„æƒ…å†µä¸‹ï¼ŒRedisæ‰ä½¿ç”¨å‹ç¼©åˆ—è¡¨æ¥å®ç°å­—å…¸ç±»å‹ã€‚å…·ä½“éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ul>
<li>
<p>å­—å…¸ä¸­ä¿å­˜çš„é”®å’Œå€¼çš„å¤§å°éƒ½è¦å°äº64å­—èŠ‚ï¼›</p>
</li>
<li>
<p>å­—å…¸ä¸­é”®å€¼å¯¹çš„ä¸ªæ•°è¦å°äº512ä¸ªã€‚</p>
</li>
</ul><p>å½“ä¸èƒ½åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶çš„æ—¶å€™ï¼ŒRediså°±ä½¿ç”¨æ•£åˆ—è¡¨æ¥å®ç°å­—å…¸ç±»å‹ã€‚Redisä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/Murmur%E5%93%88%E5%B8%8C">MurmurHash2</a>è¿™ç§è¿è¡Œé€Ÿåº¦å¿«ã€éšæœºæ€§å¥½çš„å“ˆå¸Œç®—æ³•ä½œä¸ºå“ˆå¸Œå‡½æ•°ã€‚å¯¹äºå“ˆå¸Œå†²çªé—®é¢˜ï¼ŒRedisä½¿ç”¨é“¾è¡¨æ³•æ¥è§£å†³ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒRedisè¿˜æ”¯æŒæ•£åˆ—è¡¨çš„åŠ¨æ€æ‰©å®¹ã€ç¼©å®¹ã€‚</p><p>å½“æ•°æ®åŠ¨æ€å¢åŠ ä¹‹åï¼Œæ•£åˆ—è¡¨çš„è£…è½½å› å­ä¼šä¸åœåœ°å˜å¤§ã€‚ä¸ºäº†é¿å…æ•£åˆ—è¡¨æ€§èƒ½çš„ä¸‹é™ï¼Œå½“è£…è½½å› å­å¤§äº1çš„æ—¶å€™ï¼ŒRedisä¼šè§¦å‘æ‰©å®¹ï¼Œå°†æ•£åˆ—è¡¨æ‰©å¤§ä¸ºåŸæ¥å¤§å°çš„2å€å·¦å³ï¼ˆå…·ä½“å€¼éœ€è¦è®¡ç®—æ‰èƒ½å¾—åˆ°ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥å»é˜…è¯»<a href="https://github.com/antirez/redis/blob/unstable/src/dict.c">æºç </a>ï¼‰ã€‚</p><p>å½“æ•°æ®åŠ¨æ€å‡å°‘ä¹‹åï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå½“è£…è½½å› å­å°äº0.1çš„æ—¶å€™ï¼ŒRediså°±ä¼šè§¦å‘ç¼©å®¹ï¼Œç¼©å°ä¸ºå­—å…¸ä¸­æ•°æ®ä¸ªæ•°çš„å¤§çº¦2å€å¤§å°ï¼ˆè¿™ä¸ªå€¼ä¹Ÿæ˜¯è®¡ç®—å¾—åˆ°çš„ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œä½ ä¹Ÿå¯ä»¥å»é˜…è¯»<a href="https://github.com/antirez/redis/blob/unstable/src/dict.c">æºç </a>ï¼‰ã€‚</p><p>æˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œæ‰©å®¹ç¼©å®¹è¦åšå¤§é‡çš„æ•°æ®æ¬ç§»å’Œå“ˆå¸Œå€¼çš„é‡æ–°è®¡ç®—ï¼Œæ‰€ä»¥æ¯”è¾ƒè€—æ—¶ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼ŒRedisä½¿ç”¨æˆ‘ä»¬åœ¨<a href="https://time.geekbang.org/column/article/64586">æ•£åˆ—è¡¨ï¼ˆä¸­ï¼‰</a>è®²çš„æ¸è¿›å¼æ‰©å®¹ç¼©å®¹ç­–ç•¥ï¼Œå°†æ•°æ®çš„æ¬ç§»åˆ†æ‰¹è¿›è¡Œï¼Œé¿å…äº†å¤§é‡æ•°æ®ä¸€æ¬¡æ€§æ¬ç§»å¯¼è‡´çš„æœåŠ¡åœé¡¿ã€‚</p><h2>é›†åˆï¼ˆsetï¼‰</h2><p>é›†åˆè¿™ç§æ•°æ®ç±»å‹ç”¨æ¥å­˜å‚¨ä¸€ç»„ä¸é‡å¤çš„æ•°æ®ã€‚è¿™ç§æ•°æ®ç±»å‹ä¹Ÿæœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼Œä¸€ç§æ˜¯åŸºäºæœ‰åºæ•°ç»„ï¼Œå¦ä¸€ç§æ˜¯åŸºäºæ•£åˆ—è¡¨ã€‚</p><p>å½“è¦å­˜å‚¨çš„æ•°æ®ï¼ŒåŒæ—¶æ»¡è¶³ä¸‹é¢è¿™æ ·ä¸¤ä¸ªæ¡ä»¶çš„æ—¶å€™ï¼ŒRediså°±é‡‡ç”¨æœ‰åºæ•°ç»„ï¼Œæ¥å®ç°é›†åˆè¿™ç§æ•°æ®ç±»å‹ã€‚</p><ul>
<li>
<p>å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯æ•´æ•°ï¼›</p>
</li>
<li>
<p>å­˜å‚¨çš„æ•°æ®å…ƒç´ ä¸ªæ•°ä¸è¶…è¿‡512ä¸ªã€‚</p>
</li>
</ul><p>å½“ä¸èƒ½åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶çš„æ—¶å€™ï¼ŒRediså°±ä½¿ç”¨æ•£åˆ—è¡¨æ¥å­˜å‚¨é›†åˆä¸­çš„æ•°æ®ã€‚</p><h2>æœ‰åºé›†åˆï¼ˆsortedsetï¼‰</h2><p>æœ‰åºé›†åˆè¿™ç§æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬åœ¨<a href="https://time.geekbang.org/column/article/42896">è·³è¡¨</a>é‡Œå·²ç»è¯¦ç»†è®²è¿‡äº†ã€‚å®ƒç”¨æ¥å­˜å‚¨ä¸€ç»„æ•°æ®ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°æ®ä¼šé™„å¸¦ä¸€ä¸ªå¾—åˆ†ã€‚é€šè¿‡å¾—åˆ†çš„å¤§å°ï¼Œæˆ‘ä»¬å°†æ•°æ®ç»„ç»‡æˆè·³è¡¨è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œä»¥æ”¯æŒå¿«é€Ÿåœ°æŒ‰ç…§å¾—åˆ†å€¼ã€å¾—åˆ†åŒºé—´è·å–æ•°æ®ã€‚</p><p>å®é™…ä¸Šï¼Œè·ŸRedisçš„å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œæœ‰åºé›†åˆä¹Ÿå¹¶ä¸ä»…ä»…åªæœ‰è·³è¡¨è¿™ä¸€ç§å®ç°æ–¹å¼ã€‚å½“æ•°æ®é‡æ¯”è¾ƒå°çš„æ—¶å€™ï¼ŒRedisä¼šç”¨å‹ç¼©åˆ—è¡¨æ¥å®ç°æœ‰åºé›†åˆã€‚å…·ä½“ç‚¹è¯´å°±æ˜¯ï¼Œä½¿ç”¨å‹ç¼©åˆ—è¡¨æ¥å®ç°æœ‰åºé›†åˆçš„å‰æï¼Œæœ‰è¿™æ ·ä¸¤ä¸ªï¼š</p><ul>
<li>
<p>æ‰€æœ‰æ•°æ®çš„å¤§å°éƒ½è¦å°äº64å­—èŠ‚ï¼›</p>
</li>
<li>
<p>å…ƒç´ ä¸ªæ•°è¦å°äº128ä¸ªã€‚</p>
</li>
</ul><h2>æ•°æ®ç»“æ„æŒä¹…åŒ–</h2><p>å°½ç®¡Redisç»å¸¸ä¼šè¢«ç”¨ä½œå†…å­˜æ•°æ®åº“ï¼Œä½†æ˜¯ï¼Œå®ƒä¹Ÿæ”¯æŒæ•°æ®è½ç›˜ï¼Œä¹Ÿå°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å­˜å‚¨åˆ°ç¡¬ç›˜ä¸­ã€‚è¿™æ ·ï¼Œå½“æœºå™¨æ–­ç”µçš„æ—¶å€™ï¼Œå­˜å‚¨åœ¨Redisä¸­çš„æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚åœ¨æœºå™¨é‡æ–°å¯åŠ¨ä¹‹åï¼ŒRedisåªéœ€è¦å†å°†å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„æ•°æ®ï¼Œé‡æ–°è¯»å–åˆ°å†…å­˜ï¼Œå°±å¯ä»¥ç»§ç»­å·¥ä½œäº†ã€‚</p><p>åˆšåˆšæˆ‘ä»¬è®²åˆ°ï¼ŒRedisçš„æ•°æ®æ ¼å¼ç”±â€œé”®â€å’Œâ€œå€¼â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚è€Œâ€œå€¼â€åˆæ”¯æŒå¾ˆå¤šæ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å­—å…¸ã€é›†åˆã€æœ‰åºé›†åˆã€‚åƒå­—å…¸ã€é›†åˆç­‰ç±»å‹ï¼Œåº•å±‚ç”¨åˆ°äº†æ•£åˆ—è¡¨ï¼Œæ•£åˆ—è¡¨ä¸­æœ‰æŒ‡é’ˆçš„æ¦‚å¿µï¼Œè€ŒæŒ‡é’ˆæŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€ã€‚ é‚£Redisæ˜¯å¦‚ä½•å°†è¿™æ ·ä¸€ä¸ªè·Ÿå…·ä½“å†…å­˜åœ°å€æœ‰å…³çš„æ•°æ®ç»“æ„å­˜å‚¨åˆ°ç£ç›˜ä¸­çš„å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼ŒRedisé‡åˆ°çš„è¿™ä¸ªé—®é¢˜å¹¶ä¸ç‰¹æ®Šï¼Œå¾ˆå¤šåœºæ™¯ä¸­éƒ½ä¼šé‡åˆ°ã€‚æˆ‘ä»¬æŠŠå®ƒå«ä½œ<strong>æ•°æ®ç»“æ„çš„æŒä¹…åŒ–é—®é¢˜</strong>ï¼Œæˆ–è€…<strong>å¯¹è±¡çš„æŒä¹…åŒ–é—®é¢˜</strong>ã€‚è¿™é‡Œçš„â€œæŒä¹…åŒ–â€ï¼Œä½ å¯ä»¥ç¬¼ç»Ÿåœ°å¯ä»¥ç†è§£ä¸ºâ€œå­˜å‚¨åˆ°ç£ç›˜â€ã€‚</p><p>å¦‚ä½•å°†æ•°æ®ç»“æ„æŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼Ÿæˆ‘ä»¬ä¸»è¦æœ‰ä¸¤ç§è§£å†³æ€è·¯ã€‚</p><p>ç¬¬ä¸€ç§æ˜¯æ¸…é™¤åŸæœ‰çš„å­˜å‚¨ç»“æ„ï¼Œåªå°†æ•°æ®å­˜å‚¨åˆ°ç£ç›˜ä¸­ã€‚å½“æˆ‘ä»¬éœ€è¦ä»ç£ç›˜è¿˜åŸæ•°æ®åˆ°å†…å­˜çš„æ—¶å€™ï¼Œå†é‡æ–°å°†æ•°æ®ç»„ç»‡æˆåŸæ¥çš„æ•°æ®ç»“æ„ã€‚å®é™…ä¸Šï¼ŒRedisé‡‡ç”¨çš„å°±æ˜¯è¿™ç§æŒä¹…åŒ–æ€è·¯ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæœ‰ä¸€å®šçš„å¼Šç«¯ã€‚é‚£å°±æ˜¯æ•°æ®ä»ç¡¬ç›˜è¿˜åŸåˆ°å†…å­˜çš„è¿‡ç¨‹ï¼Œä¼šè€—ç”¨æ¯”è¾ƒå¤šçš„æ—¶é—´ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨è¦å°†æ•£åˆ—è¡¨ä¸­çš„æ•°æ®å­˜å‚¨åˆ°ç£ç›˜ã€‚å½“æˆ‘ä»¬ä»ç£ç›˜ä¸­ï¼Œå–å‡ºæ•°æ®é‡æ–°æ„å»ºæ•£åˆ—è¡¨çš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°è®¡ç®—æ¯ä¸ªæ•°æ®çš„å“ˆå¸Œå€¼ã€‚å¦‚æœç£ç›˜ä¸­å­˜å‚¨çš„æ˜¯å‡ GBçš„æ•°æ®ï¼Œé‚£é‡æ„æ•°æ®ç»“æ„çš„è€—æ—¶å°±ä¸å¯å¿½è§†äº†ã€‚</p><p>ç¬¬äºŒç§æ–¹å¼æ˜¯ä¿ç•™åŸæ¥çš„å­˜å‚¨æ ¼å¼ï¼Œå°†æ•°æ®æŒ‰ç…§åŸæœ‰çš„æ ¼å¼å­˜å‚¨åœ¨ç£ç›˜ä¸­ã€‚æˆ‘ä»¬æ‹¿æ•£åˆ—è¡¨è¿™æ ·çš„æ•°æ®ç»“æ„æ¥ä¸¾ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥å°†æ•£åˆ—è¡¨çš„å¤§å°ã€æ¯ä¸ªæ•°æ®è¢«æ•£åˆ—åˆ°çš„æ§½çš„ç¼–å·ç­‰ä¿¡æ¯ï¼Œéƒ½ä¿å­˜åœ¨ç£ç›˜ä¸­ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬ä»ç£ç›˜ä¸­å°†æ•°æ®è¿˜åŸåˆ°å†…å­˜ä¸­çš„æ—¶å€™ï¼Œå°±å¯ä»¥é¿å…é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ã€‚</p><h2>æ€»ç»“å¼•ç”³</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Redisä¸­å¸¸ç”¨æ•°æ®ç±»å‹åº•å±‚ä¾èµ–çš„æ•°æ®ç»“æ„ï¼Œæ€»ç»“ä¸€ä¸‹å¤§æ¦‚æœ‰è¿™äº”ç§ï¼š<strong>å‹ç¼©åˆ—è¡¨</strong>ï¼ˆå¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„æ•°ç»„ï¼‰ã€<strong>æœ‰åºæ•°ç»„</strong>ã€<strong>é“¾è¡¨</strong>ã€<strong>æ•£åˆ—è¡¨</strong>ã€<strong>è·³è¡¨</strong>ã€‚å®é™…ä¸Šï¼ŒRediså°±æ˜¯è¿™äº›å¸¸ç”¨æ•°æ®ç»“æ„çš„å°è£…ã€‚</p><p>ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œæœ‰äº†æ•°æ®ç»“æ„å’Œç®—æ³•çš„åŸºç¡€ä¹‹åï¼Œå†å»é˜…è¯»Redisçš„æºç ï¼Œç†è§£èµ·æ¥å°±å®¹æ˜“å¤šäº†ï¼Ÿå¾ˆå¤šåŸæ¥è§‰å¾—å¾ˆæ·±å¥¥çš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸æ˜¯å°±éƒ½ä¼šè§‰å¾—é¡ºç†æˆç« äº†å‘¢ï¼Ÿ</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼Œå¤¯å®åŸºç¡€å¾ˆé‡è¦ã€‚åŒæ ·æ˜¯çœ‹æºç ï¼Œæœ‰äº›äººåªèƒ½çœ‹ä¸ªçƒ­é—¹ï¼Œäº†è§£ä¸€äº›çš®æ¯›ï¼Œæ— æ³•å½¢æˆè‡ªå·±çš„çŸ¥è¯†ç»“æ„ï¼Œä¸èƒ½åŒ–ä¸ºå·±ç”¨ï¼Œè¿‡ä¸å‡ å¤©å°±å¿˜äº†ã€‚è€Œæœ‰äº›äººåŸºç¡€å¾ˆå¥½ï¼Œä¸ä½†èƒ½çŸ¥å…¶ç„¶ï¼Œè¿˜èƒ½çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»è€ŒçœŸæ­£ç†è§£ä½œè€…è®¾è®¡çš„åŠ¨æœºã€‚è¿™æ ·ä¸ä½†èƒ½æœ‰åŠ©äºæˆ‘ä»¬ç†è§£æ‰€ç”¨çš„å¼€æºè½¯ä»¶ï¼Œè¿˜èƒ½ä¸ºæˆ‘ä»¬è‡ªå·±åˆ›æ–°æ·»ç –åŠ ç“¦ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><ol>
<li>
<p>ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå°çš„æƒ…å†µä¸‹ï¼ŒRedisä¸­çš„å¾ˆå¤šæ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—å…¸ã€æœ‰åºé›†åˆç­‰ï¼Œéƒ½æ˜¯é€šè¿‡å¤šç§æ•°æ®ç»“æ„æ¥å®ç°çš„ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·è®¾è®¡å‘¢ï¼Ÿç”¨ä¸€ç§å›ºå®šçš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œä¸æ˜¯æ›´åŠ ç®€å•å—ï¼Ÿ</p>
</li>
<li>
<p>æˆ‘ä»¬è®²åˆ°æ•°æ®ç»“æ„æŒä¹…åŒ–æœ‰ä¸¤ç§æ–¹æ³•ã€‚å¯¹äºäºŒå‰æŸ¥æ‰¾æ ‘è¿™ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å¦‚ä½•å°†å®ƒæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­å‘¢ï¼Ÿ</p>
</li>
</ol><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ï¼Œä¹Ÿæ¬¢è¿ç‚¹å‡»â€œ<span class="orange">è¯·æœ‹å‹è¯»</span>â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„å¥½å‹ï¼Œå’Œä»–ä¸€èµ·è®¨è®ºã€å­¦ä¹ ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8e/d3/8e603e3d795fc0ab2698f6f5eabf14d3.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/65/d0/b5b00bc2.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åœ¨è·¯ä¸Š</span>
                            </div>
                            <div class="bd">æ€è€ƒé¢˜1ï¼šredisçš„æ•°æ®ç»“æ„ç”±å¤šç§æ•°æ®ç»“æ„æ¥å®ç°ï¼Œä¸»è¦æ˜¯å‡ºäºæ—¶é—´å’Œç©ºé—´çš„è€ƒè™‘ï¼Œå½“æ•°æ®é‡å°çš„æ—¶å€™é€šè¿‡æ•°ç»„ä¸‹æ ‡è®¿é—®æœ€å¿«ã€å ç”¨å†…å­˜æœ€å°ï¼Œè€Œå‹ç¼©åˆ—è¡¨åªæ˜¯æ•°ç»„çš„å‡çº§ç‰ˆï¼›<br>å› ä¸ºæ•°ç»„éœ€è¦å ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å½“æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨é“¾è¡¨äº†ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯é€Ÿåº¦åˆéœ€è¦å’Œæ•°ç»„ç»“åˆï¼Œä¹Ÿå°±æœ‰äº†æ•£åˆ—è¡¨ã€‚<br>å¯¹äºæ•°æ®çš„å¤§å°å’Œå¤šå°‘é‡‡ç”¨å“ªç§æ•°æ®ç»“æ„ï¼Œç›¸ä¿¡rediså›¢é˜Ÿä¸€å®šæ˜¯æ ¹æ®å¤§å¤šæ•°çš„å¼€å‘åœºæ™¯è€Œå®šçš„ã€‚<br><br>æ€è€ƒé¢˜2ï¼šäºŒå‰æŸ¥æ‰¾æ ‘çš„å­˜å‚¨ï¼Œæˆ‘å€¾å‘äºå­˜å‚¨æ–¹å¼ä¸€ï¼Œé€šè¿‡å¡«å……å¶å­èŠ‚ç‚¹å½¢æˆå®Œå…¨äºŒå‰æ ‘ï¼Œç„¶åä»¥æ•°ç»„çš„å½¢å¼å­˜å‚¨åˆ°ç¡¬ç›˜ï¼Œæ•°æ®è¿˜åŸè¿‡ç¨‹ä¹Ÿæ˜¯éå¸¸é«˜æ•ˆçš„ã€‚å¦‚æœç”¨å­˜å‚¨æ–¹å¼äºŒå°±æ¯”è¾ƒå¤æ‚äº†ã€‚ <br></div>
                            <span class="time">2019-01-25 11:29</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Jerryé“¶é“¶</span>
                            </div>
                            <div class="bd">å‘ç°ä¸€ä¸ªåŠŸèƒ½ï¼šå·¦æ»‘è¿›å…¥ä¸Šä¸€ç¯‡ï¼Œå³æ»‘è¿›å…¥ä¸‹ä¸€ç¯‡ <br></div>
                            <span class="time">2019-01-25 07:05</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">çœ‹æ¥æ˜¯æ²¡å°‘åˆ·ä¸“æ ğŸ˜„</p>
                                <p class="reply-time">2019-01-25 13:04</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/8b/ad/6325c4c4.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç”°ä¼Ÿ à¸„à¸´à¸”à¸–à¸¶à¸‡</span>
                            </div>
                            <div class="bd">çœ‹å®Œå‰è¾¹çš„è¯¾ç¨‹ï¼Œå½“çŸ¥è¯†ç‚¹è¿æˆçº¿å’Œé¢ä¹‹åï¼Œæ‰å‘ç°åŸæ¥æ˜¯è¿™ä¹ˆå›äº‹ï¼Œå†æ¥çœ‹redisç¡®è®¤æ˜¯è±ç„¶å¼€æœ—ã€‚çŸ¥è¯†æˆä½“ç³»ä¹‹åè®°å¿†ä¼šæ›´æ·±åˆ»ï¼Œä¸è¿‡ä¹Ÿå¸¦æ¥äº†æ›´å¤šçš„æ€è€ƒå’Œå‘ç°-----çŸ¥è¯†è¾¹ç•Œæ‰©å¤§äº† <br></div>
                            <span class="time">2019-01-25 17:50</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/38/c8/dfc7a25b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">readyao</span>
                            </div>
                            <div class="bd">è€å¸ˆæ‚¨å¥½ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼ŒAå…³æ³¨äº†B,è¿™æ ·çš„æ“ä½œä¼šåŒæ—¶å†™ä¸¤ä¸ªé“¾è¡¨ä¸€ä¸ªæ˜¯Açš„å…³æ³¨åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªæ˜¯Bçš„ç²‰ä¸åˆ—è¡¨ï¼Œæ¯”å¦‚ç”¨redis çš„sortsetæ¥å­˜å‚¨ã€‚ç°åœ¨è¦æ£€æŸ¥æ‰€æœ‰ä¸ä¸€è‡´çš„æƒ…å†µ(æ¯”å¦‚ï¼ŒAçš„å…³æ³¨åˆ—è¡¨æœ‰Bï¼Œä½†æ˜¯Bçš„ç²‰ä¸åˆ—è¡¨æ²¡æœ‰Aï¼Œæˆ–è€…Açš„å…³æ³¨åˆ—è¡¨æ²¡æœ‰Bï¼Œä½†æ˜¯Bçš„ç²‰ä¸åˆ—è¡¨æœ‰A)ã€‚è¿™ç§æƒ…å†µæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å—? <br></div>
                            <span class="time">2019-01-26 10:48</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/d4/f3/b73d8abf.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ä¸‰æœ¨å­</span>
                            </div>
                            <div class="bd">æœ‰ä¸ªç–‘é—®ï¼Œæ¯”å¦‚å¯¹äºæœ‰åºé›†åˆï¼Œè¿™ä¸ªæ•°æ®é‡å¯èƒ½ä¼šé€æ­¥å¢åŠ ï¼Œé‚£ä¹ˆæ•°æ®é‡è¾¾åˆ°é˜ˆå€¼æ—¶å°±ä¼šåˆ‡æ¢æˆè·³è¡¨å—ï¼Ÿæ˜¯æ•°æ®å…¨éƒ¨ç§»åŠ¨åˆ°è·³è¡¨ï¼Œç„¶ååˆ é™¤åˆ—è¡¨å—ï¼Ÿ <br></div>
                            <span class="time">2019-01-25 18:37</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/37/8e/cf0b4575.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">éƒ‘æ™¨Cc</span>
                            </div>
                            <div class="bd">è€å¸ˆ å…³äºredisçš„å‹ç¼©åˆ—è¡¨æœ‰ä¸ªåœ°æ–¹ä¸å¤ªæ˜ç™½<br>è™½ç„¶å‹ç¼©åˆ—è¡¨çœ‹èµ·æ¥æƒ³æ•°ç»„ ä½†ä»–èƒ½åƒæ•°ç»„ä¸€æ ·æ”¯æŒæŒ‰ç…§ä¸‹æ ‡è¿›è¡Œç›´æ¥éšæœºè®¿é—®å—ï¼Ÿæ¯”å¦‚æˆ‘è¦è®¿é—®ä¸‹æ ‡ä¸ºnçš„æ•°æ®æˆ‘å¯ä¸æ˜¯éœ€è¦çŸ¥é“ä¹‹å‰ä»0åˆ°n-1çš„æ‰€æœ‰æ•°æ®çš„é•¿åº¦æ‰èƒ½æ‰¾åˆ°nï¼Œé‚£è¿™è·Ÿé“¾è¡¨çš„æ—¶é—´å¤æ‚è¯»æ²¡å•¥åŒºåˆ«å•Šï¼Œè€Œä¸”è¿˜å ç”¨äº†è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Ÿ è¿˜æ˜¯è¯´å‹ç¼©åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ çš„é•¿åº¦éƒ½è®°å½•åœ¨å®ƒçš„å¤´éƒ¨å¯ä»¥ä¸€æ¬¡æ€§çš„è·å–ï¼Ÿ <br></div>
                            <span class="time">2019-01-25 13:25</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å“ˆå“ˆï¼Œä½ è¯´çš„æ²¡é”™ã€‚å‹ç¼©åˆ—è¡¨ä¸æ”¯æŒéšæœºè®¿é—®ã€‚æœ‰ç‚¹ç±»ä¼¼é“¾è¡¨ã€‚ä½†æ˜¯æ¯”è¾ƒçœå­˜å‚¨ç©ºé—´å•Šã€‚Redisä¸€èˆ¬éƒ½æ˜¯é€šè¿‡keyè·å–æ•´ä¸ªvalueçš„å€¼ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªå‹ç¼©åˆ—è¡¨çš„æ•°æ®ï¼Œå¹¶ä¸éœ€è¦éšæœºè®¿é—®ã€‚</p>
                                <p class="reply-time">2019-01-25 16:11</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/d6/f3/601f5f29.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¼ æ·¼</span>
                            </div>
                            <div class="bd">ç‹è€å¸ˆï¼Œæ—¢ç„¶å¯ä»¥ç”¨å‹ç¼©åˆ—è¡¨ï¼Œä¸ºå•¥æ•°æ®è¶…è¿‡512ä¸ªçš„æ—¶å€™ä¸ç”¨å•é“¾è¡¨ <br></div>
                            <span class="time">2019-01-29 09:44</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/fa/d0/808c2fd9.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">éªå½©ç¬æ˜Ÿé©°</span>
                            </div>
                            <div class="bd">æˆ‘åªæƒ³è¯´è€å¸ˆä½ ä¼˜ç§€ï¼Œå¾ˆç”¨å¿ƒï¼Œæˆ‘ä¼šå°½é‡èµ¶ä¸Šæ¥ï¼ <br></div>
                            <span class="time">2019-01-27 19:05</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">wei</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œå¦‚æœå­—å…¸ä¿å­˜çš„é”®å’Œå€¼çš„å¤§å°éƒ½å°äº 64 å­—èŠ‚ï¼Œå¹¶ä¸”é”®å€¼å¯¹çš„ä¸ªæ•°å°äº 512 ä¸ªï¼ŒRedis ç”¨å‹ç¼©åˆ—è¡¨å®ç°ã€‚ä» [æºç ](https:&#47;&#47;github.com&#47;antirez&#47;redis&#47;blob&#47;unstable&#47;src&#47;ziplist.c) ï¼ˆziplist.c ziplistFindï¼‰ æ¥çœ‹å‹ç¼©åˆ—è¡¨æ ¹æ®é”®æŸ¥æ‰¾å€¼çš„æ–¹å¼ï¼Œå°±æ˜¯ä¸€ä¸ªä¸ªéå†ã€‚å¦‚æœæœ‰å‡ ç™¾ä¸ªé”®å€¼å¯¹ï¼Œè¿™ä¹ˆæŸ¥æ‰¾æ¯”æ•£åˆ—è¡¨å¿«å—ï¼Ÿ <br></div>
                            <span class="time">2019-01-26 20:36</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/d6/f3/601f5f29.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¼ æ·¼</span>
                            </div>
                            <div class="bd">é—®é¢˜1:            å‹ç¼©åˆ—è¡¨ä¼˜ç‚¹ï¼šè®¿é—®å­˜å–å¿«é€Ÿï¼ŒèŠ‚çœå†…å­˜ã€‚ä½†æ˜¯å—åˆ°æ“ä½œç³»ç»Ÿç©ºé—²å†…å­˜é™åˆ¶ã€‚è¶Šå¤§çš„è¿ç»­å†…å­˜ç©ºé—´è¶Šä¸å®¹æ˜“ç”³è¯·åˆ°ã€‚æ‰€ä»¥ç”¨äº†å…¶ä»–æ•°æ®ç»“æ„æ¯”å¦‚é“¾è¡¨æ›¿ä»£ã€‚ <br></div>
                            <span class="time">2019-01-26 14:01</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/eb/aa/db213a66.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è«å¼¹å¼¹</span>
                            </div>
                            <div class="bd">æ€è€ƒé¢˜1<br>redisçš„å„ä¸ªå­˜å‚¨éƒ½æœ‰åˆ¤æ–­æ•°æ®å¤§å°å†é€‰æ‹©å­˜å‚¨ç»“æ„ï¼Œé‚£ä¹ˆå¯ä»¥çŒœæƒ³æ˜¯ä¸ºäº†å¹³è¡¡æ—¶é—´ä¸ç©ºé—´ï¼Œä½†æ˜¯ä¼˜å…ˆä¿è¯ç©ºé—´ï¼ˆæ¯•ç«Ÿæ˜¯å†…å­˜ï¼‰ï¼Œå•ä¸€ç»“æ„ç®€å•æ˜“æ‡‚ï¼Œå¤§æ¦‚rediså¤šç§ç»“æ„å°±æ˜¯ä»å•ä¸€ç»“æ„ä¼˜åŒ–è€Œæ¥çš„å§ã€‚<br>è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œåˆ¤æ–­æ¡ä»¶512å’Œ128æ˜¯éšä¾¿å†™çš„ï¼Ÿè¿™æœ‰ä»€ä¹ˆè®¡ç®—æ–¹æ¡ˆï¼Ÿ<br><br>2æŒä¹…åŒ–<br>æ™®é€šæ ‘å¯ä»¥é€‰æ‹©ä¸€ä¸ªéå†æ–¹å¼ï¼Œä¾‹å¦‚å‰åºéå†ï¼ŒæŠŠæ ‘å˜æˆé“¾è¡¨ï¼ŒæŠŠæ•°æ®æŒ¨ä¸ªä¿å­˜ï¼Œç­‰éœ€è¦å–å‡ºæ¥å†æŒ‰é¡ºåºæŠŠæ‰€æœ‰å…ƒç´ åŠ åˆ°æ ‘é‡Œé¢ã€‚<br>äºŒå‰æŸ¥æ‰¾æ ‘æœ¬èº«åº•å±‚å°±æ˜¯ä½¿ç”¨æ•°ç»„ï¼Œæ•´ä¸ªæ•°ç»„å†™è¿›ç£ç›˜å°±å®Œäº‹äº†ï¼Œå–å‡ºæ¥ä¹Ÿæ˜¯è¿ç»­æ•°ç»„ï¼Œå®Œå…¨ä¸ç”¨ä¿å­˜æ ‘ç»“æ„ <br></div>
                            <span class="time">2019-01-25 22:13</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">çº¯æ´çš„æ†æ¶</span>
                            </div>
                            <div class="bd">Redisè¿™ç§K-Valueéå…³ç³»æ•°æ®åº“æ˜¯å¦ä¹Ÿèƒ½å¤Ÿå¾ˆå¥½çš„æ”¯æŒåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå‘¢ï¼Ÿ <br></div>
                            <span class="time">2019-01-25 18:46</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/e0/26/4d458ce3.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">çŒ«å¤´é¹°çˆ±æ‹¿é“</span>
                            </div>
                            <div class="bd">æ€è€ƒé¢˜ <br>1. redisä¸»è¦ä½œä¸ºå†…å­˜æ•°æ®åº“æ¥ä½¿ç”¨ï¼Œæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚è€Œå†…å­˜ç›¸æ¯”äºåˆä¾¿å®œç©ºé—´åˆå¤§çš„ç£ç›˜è€Œè¨€ï¼Œéœ€è¦è€ƒè™‘å­˜å‚¨ç©ºé—´ç›¸å¯¹æœ‰é™å’Œè´µçš„é—®é¢˜ã€‚é’ˆå¯¹äºæ•°æ®é‡æ¯”è¾ƒå°çš„æƒ…å†µï¼Œå°½é‡ä½¿ç”¨èŠ‚çœç©ºé—´çš„æ•°æ®ç»“æ„ã€‚è¿™ä¸ªä»·æ ¼æˆæœ¬å’Œå®ç°æˆæœ¬æ¯”è¾ƒæ˜¯åˆ’ç®—çš„ã€‚<br>2. å¦‚æœç”¨æŒ‡é’ˆæ¥è¡¨ç¤ºäºŒå‰æŸ¥æ‰¾æ ‘çš„æˆå‘˜å˜é‡ä¼šå¯¼è‡´æŒä¹…åŒ–åç‰©ç†åœ°å€å¤±æ•ˆçš„é—®é¢˜ã€‚å¯å¦å€Ÿç”¨æ•°ç»„çš„æ€æƒ³ï¼Œå­˜å‚¨äºŒå‰æŸ¥æ‰¾æ ‘èŠ‚ç‚¹çš„æ•°æ®ä»¥æ•°ç»„çš„å½¢å¼ç»„ç»‡ï¼Œå¦‚æ ‘ä¸­æ²¡æœ‰èŠ‚ç‚¹çš„ä½ç½®åœ¨æ•°ç»„çš„å¯¹åº”ä½ç½®ä½¿ç”¨0æˆ–nullã€‚ä¾‹å¦‚äºŒå‰æŸ¥æ‰¾æ ‘5ã€3ã€8ã€2ã€9åˆ™å­˜å‚¨ç›¸åº”çš„æ•°æ®å€¼5ã€3ã€8ã€2ã€0ã€0ã€9åŒæ—¶å­˜å‚¨æ•°ç»„çš„é•¿åº¦<br> <br></div>
                            <span class="time">2019-01-25 17:29</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/93/07/0ac15de4.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">JimHug</span>
                            </div>
                            <div class="bd">åè¾¹å¾ˆå°‘æœ‰è·Ÿä¸Šçš„ğŸ˜‚ <br></div>
                            <span class="time">2019-01-25 10:32</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/30/1e/0b05530d.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Yakmoz</span>
                            </div>
                            <div class="bd">1. redisä½œä¸ºä¸€ä¸ªå†…å­˜å­˜å‚¨æ•°æ®ï¼Œåº”è¯¥ä¼šåœ¨æ—¶é—´å¤æ‚åº¦ä¸æ˜¯å¾ˆé«˜çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½çš„å°‘ä½¿ç”¨å†…å­˜ï¼ŒåŸºäºè¿™ä¸ªåŸåˆ™å¯¹ä¸åŒæƒ…å†µï¼Œé‡‡å–ä¸åŒç­–ç•¥ï¼Œåƒsetåœ¨éƒ½æ˜¯æ•´æ•°çš„æƒ…å†µä¸‹ï¼Œå ç”¨ç©ºé—´å¤§å°éƒ½æ˜¯å›ºå®šçš„å°±æ²¡å¿…è¦åœ¨å­˜å‚¨æ•°æ®é•¿åº¦äº†<br>2. åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå¯ä»¥æŒ‰ç…§ä¸­åºååºå‰åºéå†æ ‘è¿›è¡Œå­˜å‚¨ <br></div>
                            <span class="time">2019-01-25 10:31</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/07/8c/51401220.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°ç¾</span>
                            </div>
                            <div class="bd">ç‹è€å¸ˆä¸¤ç§æ•°æ®ç»“æ„æŒä¹…åŒ–ï¼š<br>rediusç”¨â€œæ¸…é™¤æ ¼å¼ï¼ŒæŒä¹…åŒ–æ•°æ®å†ç»„ç»‡æ•°æ®ç»“æ„â€ è¿™ä¹ˆçœ‹æ¥æ˜¯å¾ˆæ¶ˆè€—æ€§èƒ½ï¼Œä¸ºä»€ä¹ˆä¸ç”¨â€œä¿ç•™æ•°æ®ç»“æ„â€çš„æ–¹å¼ã€‚æˆ‘ç†è§£åè€…åªç‰ºç‰²éƒ¨åˆ†ç©ºé—´æ¢å–äº†æ›´å¤šæ€§èƒ½ ã€‚<br>éº»çƒ¦ç‹è€å¸ˆè§£é‡Šä¸‹ï¼Ÿ <br></div>
                            <span class="time">2019-01-25 10:12</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯¹äºRedisæ¥è¯´ï¼Œé‡å¯å¹¶ä¸æ˜¯å¾ˆç»å¸¸çš„äº‹æƒ…ã€‚æ‰€ä»¥å¹¶ä¸ä¼šç»å¸¸ä»ç¡¬ç›˜åŠ è½½æ•°æ®åˆ°å†…å­˜å†é‡æ„æˆæ•°æ®ç»“æ„ã€‚<br><br>å®é™…ä¸Šï¼Œä¸¤ç§å­˜å‚¨æ ¼å¼éƒ½å¯ä»¥ï¼Œå¯èƒ½Rediså°±æ˜¯éšæ„é€‰æ‹©äº†ä¸€ä¸ªè€Œå·²ã€‚ä¸è¦å¤ªçº ç»“ä¸ºå•¥é€‰çš„æ˜¯è¿™ä¸ªï¼Œè€Œä¸æ˜¯é‚£ä¸ªã€‚</p>
                                <p class="reply-time">2019-01-25 16:16</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/e8/fd/035f4c94.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Sharry</span>
                            </div>
                            <div class="bd">1. å¯¹äºæ•°æ®é‡è¾ƒå°çš„æƒ…å†µ, ä½¿ç”¨é“¾è¡¨ç›´æ¥éå†çš„å¢åˆ æ”¹æŸ¥çš„æ•ˆç‡æ¯”èµ·å¤æ‚çš„ æ ‘&#47;æ•£åˆ—è¡¨&#47;è·³è¡¨ å¿½ç•¥äº†æ—‹è½¬, hash...ç­‰è¿ç®—, æ²¡æœ‰å¤ªæ˜æ˜¾çš„åŠ£åŠ¿, æ•ˆç‡åè€Œä¼šæ›´é«˜<br>2. å…³äºæ ‘çš„åºåˆ—åŒ–:     å¯ä»¥ä½¿ç”¨å‰åºéå†äºŒå‰æ ‘çš„è§„åˆ™åºåˆ—åŒ–, å·¦å³å­å­©å­ä¸º NULL åˆ™è®°ä¸º &#39;#&#39;<br>3. å…³äºæ ‘çš„ååºåˆ—åŒ–:  ä½¿ç”¨å‰åºéå†äºŒå‰æ ‘çš„è§„åˆ™è¿˜åŸ, é‡åˆ° &#39;#&#39; åˆ™è¯´æ˜éå†åˆ°äº†å¶å­ç»“ç‚¹ <br></div>
                            <span class="time">2019-01-25 09:32</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/ee/85/59e39469.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¤§å¼ </span>
                            </div>
                            <div class="bd">æ¯”é«˜çº§ç¯‡ï¼Œæ²¡é‚£ä¹ˆçƒ§è„‘äº†<br> <br></div>
                            <span class="time">2019-01-25 09:26</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/e9/0b/53bf91d3.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">WL</span>
                            </div>
                            <div class="bd">æƒ³é—®è€å¸ˆä¸¤ä¸ªé—®é¢˜: <br>1.åœ¨åˆ—è¡¨çš„åŒå‘é“¾è¡¨æ•°æ®ç»“æ„ä¸­, ä½¿ç”¨é¢å¤–çš„listæ¥å­˜å‚¨é¦–ä½èŠ‚ç‚¹å’Œé•¿åº¦ç­‰ä¿¡æ¯åä½¿ç”¨èµ·æ¥å°±ä¼šæ–¹ä¾¿å‘¢?<br>2.redisçš„æŒä¹…åŒ–ç­–ç•¥ä¸­, æ¸…é™¤åŸæœ‰çš„å­˜å‚¨ç»“æ„åªå°†æ•°æ®å­˜åœ¨ç£ç›˜ä¸­, é‚£è¿™äº›æ•°æ®å…·ä½“åœ¨ç£ç›˜ä¸­æ˜¯æ€ä¹ˆå­˜å‚¨çš„? æ˜¯é‡‡ç”¨å‹ç¼©åˆ—è¡¨çš„æ–¹å¼å—? <br></div>
                            <span class="time">2019-01-25 08:53</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">1. çœ‹å…·ä½“åº”ç”¨äº†ã€‚è¿™ç§å®ç°æ€è·¯è·Ÿæˆ‘ä»¬å¹³å¸¸ç›´æ¥å®šä¹‰é“¾è¡¨çš„æ–¹å¼æœ‰ç‚¹ä¸ä¸€æ ·ï¼ˆNode * list = null;è¿™æ ·å­ï¼‰ã€‚æ‰€ä»¥æˆ‘å°±ç¨å¾®æäº†ä¸€ä¸‹ã€‚<br>2. è¿™ä¸ªè·Ÿæ•°æ®ç»“æ„å’Œç®—æ³•å…³ç³»ä¸å¤§äº†ã€‚æˆ‘æ²¡ä»”ç»†ç ”ç©¶è¿‡ã€‚ç†è®ºä¸ŠçŒœä¸€ä¸‹çš„è¯ï¼Œå°±æ˜¯æŒ‰ç…§ä¸€ä¸ªpairï¼ˆkey+valueï¼‰ä¸€ä¸ªpairçš„é¡ºåºå­˜å‚¨åœ¨æ–‡ä»¶ä¸­ã€‚pairä¹‹é—´ç”¨ä¸€å®šæ–¹æ³•åˆ†å‰²ï¼Œæ–¹ä¾¿è¯»å–ã€‚</p>
                                <p class="reply-time">2019-01-25 16:21</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>