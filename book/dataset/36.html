<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQ1046877154ï¼Œå¾®ä¿¡loveu_110è·å–</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                36è®²ACè‡ªåŠ¨æœºï¼šå¦‚ä½•ç”¨å¤šæ¨¡å¼ä¸²åŒ¹é…å®ç°æ•æ„Ÿè¯è¿‡æ»¤åŠŸèƒ½
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/b4/66/b48bf407fcd03efc4ff2d3bd488d3666.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>å¾ˆå¤šæ”¯æŒç”¨æˆ·å‘è¡¨æ–‡æœ¬å†…å®¹çš„ç½‘ç«™ï¼Œæ¯”å¦‚BBSï¼Œå¤§éƒ½ä¼šæœ‰æ•æ„Ÿè¯è¿‡æ»¤åŠŸèƒ½ï¼Œç”¨æ¥è¿‡æ»¤æ‰ç”¨æˆ·è¾“å…¥çš„ä¸€äº›æ·«ç§½ã€ååŠ¨ã€è°©éª‚ç­‰å†…å®¹ã€‚ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œè¿™äº›åŠŸèƒ½æœ€åŸºæœ¬çš„åŸç†å°±æ˜¯å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ç»´æŠ¤ä¸€ä¸ªæ•æ„Ÿè¯çš„å­—å…¸ï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€æ®µæ–‡å­—å†…å®¹ä¹‹åï¼Œé€šè¿‡å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œæ¥æŸ¥æ‰¾ç”¨æˆ·è¾“å…¥çš„è¿™æ®µæ–‡å­—ï¼Œæ˜¯å¦åŒ…å«æ•æ„Ÿè¯ã€‚å¦‚æœæœ‰ï¼Œå°±ç”¨â€œ***â€æŠŠå®ƒæ›¿ä»£æ‰ã€‚</p><p>æˆ‘ä»¬å‰é¢è®²è¿‡å¥½å‡ ç§å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•äº†ï¼Œå®ƒä»¬éƒ½å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¯¹äºè®¿é—®é‡å·¨å¤§çš„ç½‘ç«™æ¥è¯´ï¼Œæ¯”å¦‚æ·˜å®ï¼Œç”¨æˆ·æ¯å¤©çš„è¯„è®ºæ•°æœ‰å‡ äº¿ã€ç”šè‡³å‡ åäº¿ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯¹æ•æ„Ÿè¯è¿‡æ»¤ç³»ç»Ÿçš„æ€§èƒ½è¦æ±‚å°±è¦å¾ˆé«˜ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬ä¹Ÿä¸æƒ³ï¼Œç”¨æˆ·è¾“å…¥å†…å®¹ä¹‹åï¼Œè¦ç­‰å‡ ç§’æ‰èƒ½å‘é€å‡ºå»å§ï¼Ÿæˆ‘ä»¬ä¹Ÿä¸æƒ³ï¼Œä¸ºäº†è¿™ä¸ªåŠŸèƒ½è€—è´¹è¿‡å¤šçš„æœºå™¨å§ï¼Ÿ<strong>é‚£å¦‚ä½•æ‰èƒ½å®ç°ä¸€ä¸ªé«˜æ€§èƒ½çš„æ•æ„Ÿè¯è¿‡æ»¤ç³»ç»Ÿå‘¢</strong>ï¼Ÿè¿™å°±è¦ç”¨åˆ°ä»Šå¤©çš„<strong>å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•</strong>ã€‚</p><h2>åŸºäºå•æ¨¡å¼ä¸²å’ŒTrieæ ‘å®ç°çš„æ•æ„Ÿè¯è¿‡æ»¤</h2><p>æˆ‘ä»¬å‰é¢å‡ èŠ‚è®²äº†å¥½å‡ ç§å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œæœ‰BFç®—æ³•ã€RKç®—æ³•ã€BMç®—æ³•ã€KMPç®—æ³•ï¼Œè¿˜æœ‰Trieæ ‘ã€‚å‰é¢å››ç§ç®—æ³•éƒ½æ˜¯å•æ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼Œåªæœ‰Trieæ ‘æ˜¯å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ã€‚</p><p>æˆ‘è¯´è¿‡ï¼Œå•æ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼Œæ˜¯åœ¨ä¸€ä¸ªæ¨¡å¼ä¸²å’Œä¸€ä¸ªä¸»ä¸²ä¹‹é—´è¿›è¡ŒåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªä¸»ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªæ¨¡å¼ä¸²ã€‚å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼Œå°±æ˜¯åœ¨å¤šä¸ªæ¨¡å¼ä¸²å’Œä¸€ä¸ªä¸»ä¸²ä¹‹é—´åšåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªä¸»ä¸²ä¸­æŸ¥æ‰¾å¤šä¸ªæ¨¡å¼ä¸²ã€‚</p><!-- [[[read_end]]] --><p>å°½ç®¡ï¼Œå•æ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ä¹Ÿèƒ½å®Œæˆå¤šæ¨¡å¼ä¸²çš„åŒ¹é…å·¥ä½œã€‚ä¾‹å¦‚å¼€ç¯‡çš„æ€è€ƒé¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ¯ä¸ªæ•æ„Ÿè¯ï¼Œé€šè¿‡å•æ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼ˆæ¯”å¦‚KMPç®—æ³•ï¼‰ä¸ç”¨æˆ·è¾“å…¥çš„æ–‡å­—å†…å®¹è¿›è¡ŒåŒ¹é…ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšçš„è¯ï¼Œæ¯ä¸ªåŒ¹é…è¿‡ç¨‹éƒ½éœ€è¦æ‰«æä¸€éç”¨æˆ·è¾“å…¥çš„å†…å®¹ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸‹æ¥å°±è¦æ‰«æå¾ˆå¤šéç”¨æˆ·è¾“å…¥çš„å†…å®¹ã€‚å¦‚æœæ•æ„Ÿè¯å¾ˆå¤šï¼Œæ¯”å¦‚å‡ åƒä¸ªï¼Œå¹¶ä¸”ç”¨æˆ·è¾“å…¥çš„å†…å®¹å¾ˆé•¿ï¼Œå‡å¦‚æœ‰ä¸Šåƒä¸ªå­—ç¬¦ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦æ‰«æå‡ åƒéè¿™æ ·çš„è¾“å…¥å†…å®¹ã€‚å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§å¤„ç†æ€è·¯æ¯”è¾ƒä½æ•ˆã€‚</p><p>ä¸å•æ¨¡å¼åŒ¹é…ç®—æ³•ç›¸æ¯”ï¼Œå¤šæ¨¡å¼åŒ¹é…ç®—æ³•åœ¨è¿™ä¸ªé—®é¢˜çš„å¤„ç†ä¸Šå°±å¾ˆé«˜æ•ˆäº†ã€‚å®ƒåªéœ€è¦æ‰«æä¸€éä¸»ä¸²ï¼Œå°±èƒ½åœ¨ä¸»ä¸²ä¸­ä¸€æ¬¡æ€§æŸ¥æ‰¾å¤šä¸ªæ¨¡å¼ä¸²æ˜¯å¦å­˜åœ¨ï¼Œä»è€Œå¤§å¤§æé«˜åŒ¹é…æ•ˆç‡ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒTrieæ ‘å°±æ˜¯ä¸€ç§å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ã€‚é‚£å¦‚ä½•ç”¨Trieæ ‘å®ç°æ•æ„Ÿè¯è¿‡æ»¤åŠŸèƒ½å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥å¯¹æ•æ„Ÿè¯å­—å…¸è¿›è¡Œé¢„å¤„ç†ï¼Œæ„å»ºæˆTrieæ ‘ç»“æ„ã€‚è¿™ä¸ªé¢„å¤„ç†çš„æ“ä½œåªéœ€è¦åšä¸€æ¬¡ï¼Œå¦‚æœæ•æ„Ÿè¯å­—å…¸åŠ¨æ€æ›´æ–°äº†ï¼Œæ¯”å¦‚åˆ é™¤ã€æ·»åŠ äº†ä¸€ä¸ªæ•æ„Ÿè¯ï¼Œé‚£æˆ‘ä»¬åªéœ€è¦åŠ¨æ€æ›´æ–°ä¸€ä¸‹Trieæ ‘å°±å¯ä»¥äº†ã€‚</p><p>å½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ–‡æœ¬å†…å®¹åï¼Œæˆ‘ä»¬æŠŠç”¨æˆ·è¾“å…¥çš„å†…å®¹ä½œä¸ºä¸»ä¸²ï¼Œä»ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾æ˜¯å­—ç¬¦Cï¼‰å¼€å§‹ï¼Œåœ¨Trieæ ‘ä¸­åŒ¹é…ã€‚å½“åŒ¹é…åˆ°Trieæ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œæˆ–è€…ä¸­é€”é‡åˆ°ä¸åŒ¹é…å­—ç¬¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†ä¸»ä¸²çš„å¼€å§‹åŒ¹é…ä½ç½®åç§»ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯ä»å­—ç¬¦Cçš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œé‡æ–°åœ¨Trieæ ‘ä¸­åŒ¹é…ã€‚</p><p>åŸºäºTrieæ ‘çš„è¿™ç§å¤„ç†æ–¹æ³•ï¼Œæœ‰ç‚¹ç±»ä¼¼å•æ¨¡å¼ä¸²åŒ¹é…çš„BFç®—æ³•ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå•æ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ä¸­ï¼ŒKMPç®—æ³•å¯¹BFç®—æ³•è¿›è¡Œæ”¹è¿›ï¼Œå¼•å…¥äº†nextæ•°ç»„ï¼Œè®©åŒ¹é…å¤±è´¥æ—¶ï¼Œå°½å¯èƒ½å°†æ¨¡å¼ä¸²å¾€åå¤šæ»‘åŠ¨å‡ ä½ã€‚å€Ÿé‰´å•æ¨¡å¼ä¸²çš„ä¼˜åŒ–æ”¹è¿›æ–¹æ³•ï¼Œèƒ½å¦å¯¹å¤šæ¨¡å¼ä¸²Trieæ ‘è¿›è¡Œæ”¹è¿›ï¼Œè¿›ä¸€æ­¥æé«˜Trieæ ‘çš„æ•ˆç‡å‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°ACè‡ªåŠ¨æœºç®—æ³•äº†ã€‚</p><h2>ç»å…¸çš„å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼šACè‡ªåŠ¨æœº</h2><p>ACè‡ªåŠ¨æœºç®—æ³•ï¼Œå…¨ç§°æ˜¯Aho-Corasickç®—æ³•ã€‚å…¶å®ï¼ŒTrieæ ‘è·ŸACè‡ªåŠ¨æœºä¹‹é—´çš„å…³ç³»ï¼Œå°±åƒå•ä¸²åŒ¹é…ä¸­æœ´ç´ çš„ä¸²åŒ¹é…ç®—æ³•ï¼Œè·ŸKMPç®—æ³•ä¹‹é—´çš„å…³ç³»ä¸€æ ·ï¼Œåªä¸è¿‡å‰è€…é’ˆå¯¹çš„æ˜¯å¤šæ¨¡å¼ä¸²è€Œå·²ã€‚æ‰€ä»¥ï¼Œ<strong>ACè‡ªåŠ¨æœºå®é™…ä¸Šå°±æ˜¯åœ¨Trieæ ‘ä¹‹ä¸Šï¼ŒåŠ äº†ç±»ä¼¼KMPçš„nextæ•°ç»„ï¼Œåªä¸è¿‡æ­¤å¤„çš„nextæ•°ç»„æ˜¯æ„å»ºåœ¨æ ‘ä¸Šç½¢äº†</strong>ã€‚å¦‚æœä»£ç è¡¨ç¤ºï¼Œå°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre><code>public class AcNode {
  public char data; 
  public AcNode[] children = new AcNode[26]; // å­—ç¬¦é›†åªåŒ…å«a~zè¿™26ä¸ªå­—ç¬¦
  public boolean isEndingChar = false; // ç»“å°¾å­—ç¬¦ä¸ºtrue
  public int length = -1; // å½“isEndingChar=trueæ—¶ï¼Œè®°å½•æ¨¡å¼ä¸²é•¿åº¦
  public AcNode fail; // å¤±è´¥æŒ‡é’ˆ
  public AcNode(char data) {
    this.data = data;
  }
}
</code></pre><p>æ‰€ä»¥ï¼ŒACè‡ªåŠ¨æœºçš„æ„å»ºï¼ŒåŒ…å«ä¸¤ä¸ªæ“ä½œï¼š</p><ul>
<li>
<p>å°†å¤šä¸ªæ¨¡å¼ä¸²æ„å»ºæˆTrieæ ‘ï¼›</p>
</li>
<li>
<p>åœ¨Trieæ ‘ä¸Šæ„å»ºå¤±è´¥æŒ‡é’ˆï¼ˆç›¸å½“äºKMPä¸­çš„å¤±æ•ˆå‡½æ•°nextæ•°ç»„ï¼‰ã€‚</p>
</li>
</ul><p>å…³äºå¦‚ä½•æ„å»ºTrieæ ‘ï¼Œæˆ‘ä»¬ä¸Šä¸€èŠ‚å·²ç»è®²è¿‡äº†ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬å°±é‡ç‚¹çœ‹ä¸‹ï¼Œ<strong>æ„å»ºå¥½Trieæ ‘ä¹‹åï¼Œå¦‚ä½•åœ¨å®ƒä¹‹ä¸Šæ„å»ºå¤±è´¥æŒ‡é’ˆï¼Ÿ</strong></p><p>æˆ‘ç”¨ä¸€ä¸ªä¾‹å­ç»™ä½ è®²è§£ã€‚è¿™é‡Œæœ‰4ä¸ªæ¨¡å¼ä¸²ï¼Œåˆ†åˆ«æ˜¯cï¼Œbcï¼Œbcdï¼Œabcdï¼›ä¸»ä¸²æ˜¯abcdã€‚</p><p><img src="https://static001.geekbang.org/resource/image/f8/f1/f80487051d8f44cabf488195de8db1f1.jpg" alt=""></p><p>Trieæ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå¤±è´¥æŒ‡é’ˆï¼Œå®ƒçš„ä½œç”¨å’Œæ„å»ºè¿‡ç¨‹ï¼Œè·ŸKMPç®—æ³•ä¸­çš„nextæ•°ç»„æå…¶ç›¸ä¼¼ã€‚æ‰€ä»¥<strong>è¦æƒ³çœ‹æ‡‚è¿™èŠ‚å†…å®¹ï¼Œä½ è¦å…ˆç†è§£KMPç®—æ³•ä¸­nextæ•°ç»„çš„æ„å»ºè¿‡ç¨‹</strong>ã€‚å¦‚æœä½ è¿˜æœ‰ç‚¹ä¸æ¸…æ¥šï¼Œå»ºè®®ä½ å…ˆå›å¤´å»å¼„æ‡‚KMPç®—æ³•ã€‚</p><p>å‡è®¾æˆ‘ä»¬æ²¿Trieæ ‘èµ°åˆ°pèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾ä¸­çš„ç´«è‰²èŠ‚ç‚¹ï¼Œé‚£pçš„å¤±è´¥æŒ‡é’ˆå°±æ˜¯ä»rootèµ°åˆ°ç´«è‰²èŠ‚ç‚¹å½¢æˆçš„å­—ç¬¦ä¸²abcï¼Œè·Ÿæ‰€æœ‰æ¨¡å¼ä¸²å‰ç¼€åŒ¹é…çš„æœ€é•¿å¯åŒ¹é…åç¼€å­ä¸²ï¼Œå°±æ˜¯ç®­å¤´æŒ‡çš„bcæ¨¡å¼ä¸²ã€‚</p><p>è¿™é‡Œçš„æœ€é•¿å¯åŒ¹é…åç¼€å­ä¸²ï¼Œæˆ‘ç¨å¾®è§£é‡Šä¸€ä¸‹ã€‚å­—ç¬¦ä¸²abcçš„åç¼€å­ä¸²æœ‰ä¸¤ä¸ªbcï¼Œcï¼Œæˆ‘ä»¬æ‹¿å®ƒä»¬ä¸å…¶ä»–æ¨¡å¼ä¸²åŒ¹é…ï¼Œå¦‚æœæŸä¸ªåç¼€å­ä¸²å¯ä»¥åŒ¹é…æŸä¸ªæ¨¡å¼ä¸²çš„å‰ç¼€ï¼Œé‚£æˆ‘ä»¬å°±æŠŠè¿™ä¸ªåç¼€å­ä¸²å«ä½œ<strong>å¯åŒ¹é…åç¼€å­ä¸²</strong>ã€‚</p><p>æˆ‘ä»¬ä»å¯åŒ¹é…åç¼€å­ä¸²ä¸­ï¼Œæ‰¾å‡ºæœ€é•¿çš„ä¸€ä¸ªï¼Œå°±æ˜¯åˆšåˆšè®²åˆ°çš„æœ€é•¿å¯åŒ¹é…åç¼€å­ä¸²ã€‚æˆ‘ä»¬å°†pèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆæŒ‡å‘é‚£ä¸ªæœ€é•¿åŒ¹é…åç¼€å­ä¸²å¯¹åº”çš„æ¨¡å¼ä¸²çš„å‰ç¼€çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯ä¸‹å›¾ä¸­ç®­å¤´æŒ‡å‘çš„èŠ‚ç‚¹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/58/ca/582ec4651948b4cdc1e1b49235e4f8ca.jpg" alt=""></p><p>è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆè¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥æœ‰äº›å¤æ‚ã€‚å…¶å®ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ ‘ä¸­ç›¸åŒæ·±åº¦çš„èŠ‚ç‚¹æ”¾åˆ°åŒä¸€å±‚ï¼Œé‚£ä¹ˆæŸä¸ªèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆåªæœ‰å¯èƒ½å‡ºç°åœ¨å®ƒæ‰€åœ¨å±‚çš„ä¸Šä¸€å±‚ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åƒKMPç®—æ³•é‚£æ ·ï¼Œå½“æˆ‘ä»¬è¦æ±‚æŸä¸ªèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šè¿‡å·²ç»æ±‚å¾—çš„ã€æ·±åº¦æ›´å°çš„é‚£äº›èŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆæ¥æ¨å¯¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€å±‚ä¾æ¬¡æ¥æ±‚è§£æ¯ä¸ªèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆã€‚æ‰€ä»¥ï¼Œå¤±è´¥æŒ‡é’ˆçš„æ„å»ºè¿‡ç¨‹ï¼Œæ˜¯ä¸€ä¸ªæŒ‰å±‚éå†æ ‘çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆrootçš„å¤±è´¥æŒ‡é’ˆä¸ºNULLï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘è‡ªå·±ã€‚<strong>å½“æˆ‘ä»¬å·²ç»æ±‚å¾—æŸä¸ªèŠ‚ç‚¹pçš„å¤±è´¥æŒ‡é’ˆä¹‹åï¼Œå¦‚ä½•å¯»æ‰¾å®ƒçš„å­èŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆå‘¢ï¼Ÿ</strong></p><p>æˆ‘ä»¬å‡è®¾èŠ‚ç‚¹pçš„å¤±è´¥æŒ‡é’ˆæŒ‡å‘èŠ‚ç‚¹qï¼Œæˆ‘ä»¬çœ‹èŠ‚ç‚¹pçš„å­èŠ‚ç‚¹pcå¯¹åº”çš„å­—ç¬¦ï¼Œæ˜¯å¦ä¹Ÿå¯ä»¥åœ¨èŠ‚ç‚¹qçš„å­èŠ‚ç‚¹ä¸­æ‰¾åˆ°ã€‚å¦‚æœæ‰¾åˆ°äº†èŠ‚ç‚¹qçš„ä¸€ä¸ªå­èŠ‚ç‚¹qcï¼Œå¯¹åº”çš„å­—ç¬¦è·ŸèŠ‚ç‚¹pcå¯¹åº”çš„å­—ç¬¦ç›¸åŒï¼Œåˆ™å°†èŠ‚ç‚¹pcçš„å¤±è´¥æŒ‡é’ˆæŒ‡å‘èŠ‚ç‚¹qcã€‚</p><p><img src="https://static001.geekbang.org/resource/image/da/1f/da685b7ac5f7dc41b2db6cf5d9a35a1f.jpg" alt=""></p><p>å¦‚æœèŠ‚ç‚¹qä¸­æ²¡æœ‰å­èŠ‚ç‚¹çš„å­—ç¬¦ç­‰äºèŠ‚ç‚¹pcåŒ…å«çš„å­—ç¬¦ï¼Œåˆ™ä»¤q=q-&gt;failï¼ˆfailè¡¨ç¤ºå¤±è´¥æŒ‡é’ˆï¼Œè¿™é‡Œæœ‰æ²¡æœ‰å¾ˆåƒKMPç®—æ³•é‡Œæ±‚nextçš„è¿‡ç¨‹ï¼Ÿï¼‰ï¼Œç»§ç»­ä¸Šé¢çš„æŸ¥æ‰¾ï¼Œç›´åˆ°qæ˜¯rootä¸ºæ­¢ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ç›¸åŒå­—ç¬¦çš„å­èŠ‚ç‚¹ï¼Œå°±è®©èŠ‚ç‚¹pcçš„å¤±è´¥æŒ‡é’ˆæŒ‡å‘rootã€‚</p><p><img src="https://static001.geekbang.org/resource/image/91/61/91123d8c38a050d32ca730a93c7aa061.jpg" alt=""></p><p>æˆ‘å°†æ„å»ºå¤±è´¥æŒ‡é’ˆçš„ä»£ç è´´åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥å¯¹ç…§ç€è®²è§£ä¸€å—çœ‹ä¸‹ï¼Œåº”è¯¥æ›´å®¹æ˜“ç†è§£ã€‚è¿™é‡Œé¢ï¼Œæ„å»ºTrieæ ‘çš„ä»£ç æˆ‘å¹¶æ²¡æœ‰è´´å‡ºæ¥ï¼Œä½ å¯ä»¥å‚çœ‹ä¸Šä¸€èŠ‚çš„ä»£ç ï¼Œè‡ªå·±å®ç°ã€‚</p><pre><code>public void buildFailurePointer() {
  Queue&lt;AcNode&gt; queue = new LinkedList&lt;&gt;();
  root.fail = null;
  queue.add(root);
  while (!queue.isEmpty()) {
    AcNode p = queue.remove();
    for (int i = 0; i &lt; 26; ++i) {
      AcNode pc = p.children[i];
      if (pc == null) continue;
      if (p == root) {
        pc.fail = root;
      } else {
        AcNode q = p.fail;
        while (q != null) {
          AcNode qc = q.children[pc.data - 'a'];
          if (qc != null) {
            pc.fail = qc;
            break;
          }
          q = q.fail;
        }
        if (q == null) {
          pc.fail = root;
        }
      }
      queue.add(pc);
    }
  }
}
</code></pre><p>é€šè¿‡æŒ‰å±‚æ¥è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹çš„å¤±æ•ˆæŒ‡é’ˆï¼Œåˆšåˆšä¸¾çš„é‚£ä¸ªä¾‹å­ï¼Œæœ€åæ„å»ºå®Œæˆä¹‹åçš„ACè‡ªåŠ¨æœºå°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/51/3c/5150d176502dda4adfc63e9b2915b23c.jpg" alt=""></p><p>ACè‡ªåŠ¨æœºåˆ°æ­¤å°±æ„å»ºå®Œæˆäº†ã€‚æˆ‘ä»¬ç°åœ¨æ¥çœ‹ä¸‹ï¼Œ<strong>å¦‚ä½•åœ¨ACè‡ªåŠ¨æœºä¸ŠåŒ¹é…ä¸»ä¸²ï¼Ÿ</strong></p><p>æˆ‘ä»¬è¿˜æ˜¯æ‹¿ä¹‹å‰çš„ä¾‹å­æ¥è®²è§£ã€‚åœ¨åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œä¸»ä¸²ä»i=0å¼€å§‹ï¼ŒACè‡ªåŠ¨æœºä»æŒ‡é’ˆp=rootå¼€å§‹ï¼Œå‡è®¾æ¨¡å¼ä¸²æ˜¯bï¼Œä¸»ä¸²æ˜¯aã€‚</p><ul>
<li>
<p>å¦‚æœpæŒ‡å‘çš„èŠ‚ç‚¹æœ‰ä¸€ä¸ªç­‰äºb[i]çš„å­èŠ‚ç‚¹xï¼Œæˆ‘ä»¬å°±æ›´æ–°pæŒ‡å‘xï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦é€šè¿‡å¤±è´¥æŒ‡é’ˆï¼Œæ£€æµ‹ä¸€ç³»åˆ—å¤±è´¥æŒ‡é’ˆä¸ºç»“å°¾çš„è·¯å¾„æ˜¯å¦æ˜¯æ¨¡å¼ä¸²ã€‚è¿™ä¸€å¥ä¸å¥½ç†è§£ï¼Œä½ å¯ä»¥ç»“åˆä»£ç çœ‹ã€‚å¤„ç†å®Œä¹‹åï¼Œæˆ‘ä»¬å°†iåŠ ä¸€ï¼Œç»§ç»­è¿™ä¸¤ä¸ªè¿‡ç¨‹ï¼›</p>
</li>
<li>
<p>å¦‚æœpæŒ‡å‘çš„èŠ‚ç‚¹æ²¡æœ‰ç­‰äºb[i]çš„å­èŠ‚ç‚¹ï¼Œé‚£å¤±è´¥æŒ‡é’ˆå°±æ´¾ä¸Šç”¨åœºäº†ï¼Œæˆ‘ä»¬è®©p=p-&gt;failï¼Œç„¶åç»§ç»­è¿™2ä¸ªè¿‡ç¨‹ã€‚</p>
</li>
</ul><p>å…³äºåŒ¹é…çš„è¿™éƒ¨åˆ†ï¼Œæ–‡å­—æè¿°ä¸å¦‚ä»£ç çœ‹å¾—æ¸…æ¥šï¼Œæ‰€ä»¥æˆ‘æŠŠä»£ç è´´äº†å‡ºæ¥ï¼Œéå¸¸ç®€çŸ­ï¼Œå¹¶ä¸”æ·»åŠ äº†è¯¦ç»†çš„æ³¨é‡Šï¼Œä½ å¯ä»¥å¯¹ç…§ç€çœ‹ä¸‹ã€‚è¿™æ®µä»£ç è¾“å‡ºçš„å°±æ˜¯ï¼Œåœ¨ä¸»ä¸²ä¸­æ¯ä¸ªå¯ä»¥åŒ¹é…çš„æ¨¡å¼ä¸²å‡ºç°çš„ä½ç½®ã€‚</p><pre><code>public void match(char[] text) { // textæ˜¯ä¸»ä¸²
  int n = text.length;
  AcNode p = root;
  for (int i = 0; i &lt; n; ++i) {
    int idx = text[i] - 'a';
    while (p.children[idx] == null &amp;&amp; p != root) {
      p = p.fail; // å¤±è´¥æŒ‡é’ˆå‘æŒ¥ä½œç”¨çš„åœ°æ–¹
    }
    p = p.children[idx];
    if (p == null) p = root; // å¦‚æœæ²¡æœ‰åŒ¹é…çš„ï¼Œä»rootå¼€å§‹é‡æ–°åŒ¹é…
    AcNode tmp = p;
    while (tmp != root) { // æ‰“å°å‡ºå¯ä»¥åŒ¹é…çš„æ¨¡å¼ä¸²
      if (tmp.isEndingChar == true) {
        int pos = i-tmp.length+1;
        System.out.println(&quot;åŒ¹é…èµ·å§‹ä¸‹æ ‡&quot; + pos + &quot;; é•¿åº¦&quot; + tmp.length);
      }
      tmp = tmp.fail;
    }
  }
}
</code></pre><h2>è§£ç­”å¼€ç¯‡</h2><p>ACè‡ªåŠ¨æœºçš„å†…å®¹è®²å®Œäº†ï¼Œå…³äºå¼€ç¯‡çš„é—®é¢˜ï¼Œä½ åº”è¯¥èƒ½è§£ç­”äº†å§ï¼Ÿå®é™…ä¸Šï¼Œæˆ‘ä¸Šé¢è´´å‡ºæ¥çš„ä»£ç ï¼Œå·²ç»æ˜¯ä¸€ä¸ªæ•æ„Ÿè¯è¿‡æ»¤çš„åŸå‹ä»£ç äº†ã€‚å®ƒå¯ä»¥æ‰¾åˆ°æ‰€æœ‰æ•æ„Ÿè¯å‡ºç°çš„ä½ç½®ï¼ˆåœ¨ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ä¸­çš„èµ·å§‹ä¸‹æ ‡ï¼‰ã€‚ä½ åªéœ€è¦ç¨åŠ æ”¹é€ ï¼Œå†éå†ä¸€éæ–‡æœ¬å†…å®¹ï¼ˆä¸»ä¸²ï¼‰ï¼Œå°±å¯ä»¥å°†æ–‡æœ¬ä¸­çš„æ‰€æœ‰æ•æ„Ÿè¯æ›¿æ¢æˆâ€œ***â€ã€‚</p><p>æ‰€ä»¥æˆ‘è¿™é‡Œç€é‡è®²ä¸€ä¸‹ï¼Œ<strong>ACè‡ªåŠ¨æœºå®ç°çš„æ•æ„Ÿè¯è¿‡æ»¤ç³»ç»Ÿï¼Œæ˜¯å¦æ¯”å•æ¨¡å¼ä¸²åŒ¹é…æ–¹æ³•æ›´é«˜æ•ˆå‘¢ï¼Ÿ</strong></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†æ•æ„Ÿè¯æ„å»ºæˆACè‡ªåŠ¨æœºï¼ŒåŒ…æ‹¬æ„å»ºTrieæ ‘ä»¥åŠæ„å»ºå¤±è´¥æŒ‡é’ˆã€‚</p><p>æˆ‘ä»¬ä¸Šä¸€èŠ‚è®²è¿‡ï¼ŒTrieæ ‘æ„å»ºçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(m*len)ï¼Œå…¶ä¸­lenè¡¨ç¤ºæ•æ„Ÿè¯çš„å¹³å‡é•¿åº¦ï¼Œmè¡¨ç¤ºæ•æ„Ÿè¯çš„ä¸ªæ•°ã€‚é‚£æ„å»ºå¤±è´¥æŒ‡é’ˆçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿæˆ‘è¿™é‡Œç»™å‡ºä¸€ä¸ªä¸æ˜¯å¾ˆç´§ç¡®çš„ä¸Šç•Œã€‚</p><p>å‡è®¾Trieæ ‘ä¸­æ€»çš„èŠ‚ç‚¹ä¸ªæ•°æ˜¯kï¼Œæ¯ä¸ªèŠ‚ç‚¹æ„å»ºå¤±è´¥æŒ‡é’ˆçš„æ—¶å€™ï¼Œï¼ˆä½ å¯ä»¥çœ‹ä¸‹ä»£ç ï¼‰æœ€è€—æ—¶çš„ç¯èŠ‚æ˜¯whileå¾ªç¯ä¸­çš„q=q-&gt;failï¼Œæ¯è¿è¡Œä¸€æ¬¡è¿™ä¸ªè¯­å¥ï¼ŒqæŒ‡å‘èŠ‚ç‚¹çš„æ·±åº¦éƒ½ä¼šå‡å°‘1ï¼Œè€Œæ ‘çš„é«˜åº¦æœ€é«˜ä¹Ÿä¸ä¼šè¶…è¿‡lenï¼Œæ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹æ„å»ºå¤±è´¥æŒ‡é’ˆçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(len)ã€‚æ•´ä¸ªå¤±è´¥æŒ‡é’ˆçš„æ„å»ºè¿‡ç¨‹å°±æ˜¯O(k*len)ã€‚</p><p>ä¸è¿‡ï¼ŒACè‡ªåŠ¨æœºçš„æ„å»ºè¿‡ç¨‹éƒ½æ˜¯é¢„å…ˆå¤„ç†å¥½çš„ï¼Œæ„å»ºå¥½ä¹‹åï¼Œå¹¶ä¸ä¼šé¢‘ç¹åœ°æ›´æ–°ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“åˆ°æ•æ„Ÿè¯è¿‡æ»¤çš„è¿è¡Œæ•ˆç‡ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹ï¼Œ<strong>ç”¨ACè‡ªåŠ¨æœºåšåŒ¹é…çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ</strong></p><p>è·Ÿåˆšåˆšæ„å»ºå¤±è´¥æŒ‡é’ˆçš„åˆ†æç±»ä¼¼ï¼Œforå¾ªç¯ä¾æ¬¡éå†ä¸»ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œforå¾ªç¯å†…éƒ¨æœ€è€—æ—¶çš„éƒ¨åˆ†ä¹Ÿæ˜¯whileå¾ªç¯ï¼Œè€Œè¿™ä¸€éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(len)ï¼Œæ‰€ä»¥æ€»çš„åŒ¹é…çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n*len)ã€‚å› ä¸ºæ•æ„Ÿè¯å¹¶ä¸ä¼šå¾ˆé•¿ï¼Œè€Œä¸”è¿™ä¸ªæ—¶é—´å¤æ‚åº¦åªæ˜¯ä¸€ä¸ªéå¸¸å®½æ³›çš„ä¸Šé™ï¼Œå®é™…æƒ…å†µä¸‹ï¼Œå¯èƒ½è¿‘ä¼¼äºO(n)ï¼Œæ‰€ä»¥ACè‡ªåŠ¨æœºåšæ•æ„Ÿè¯è¿‡æ»¤ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚</p><p>ä½ å¯ä»¥ä¼šè¯´ï¼Œä»æ—¶é—´å¤æ‚åº¦ä¸Šçœ‹ï¼ŒACè‡ªåŠ¨æœºåŒ¹é…çš„æ•ˆç‡è·ŸTrieæ ‘ä¸€æ ·å•Šã€‚å®é™…ä¸Šï¼Œå› ä¸ºå¤±æ•ˆæŒ‡é’ˆå¯èƒ½å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æŒ‡å‘rootèŠ‚ç‚¹ï¼Œæ‰€ä»¥ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåœ¨ACè‡ªåŠ¨æœºä¸ŠåšåŒ¹é…çš„æ•ˆç‡è¦è¿œé«˜äºåˆšåˆšè®¡ç®—å‡ºçš„æ¯”è¾ƒå®½æ³›çš„æ—¶é—´å¤æ‚åº¦ã€‚åªæœ‰åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ŒACè‡ªåŠ¨æœºçš„æ€§èƒ½æ‰ä¼šé€€åŒ–çš„è·ŸTrieæ ‘ä¸€æ ·ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8c/37/8cd064ab3103f9f38b02f298fc01c237.jpg" alt=""></p><h2>å†…å®¹å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬è®²äº†å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼ŒACè‡ªåŠ¨æœºã€‚å•æ¨¡å¼ä¸²åŒ¹é…ç®—æ³•æ˜¯ä¸ºäº†å¿«é€Ÿåœ¨ä¸»ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªæ¨¡å¼ä¸²ï¼Œè€Œå¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•æ˜¯ä¸ºäº†å¿«é€Ÿåœ¨ä¸»ä¸²ä¸­æŸ¥æ‰¾å¤šä¸ªæ¨¡å¼ä¸²ã€‚</p><p>ACè‡ªåŠ¨æœºæ˜¯åŸºäºTrieæ ‘çš„ä¸€ç§æ”¹è¿›ç®—æ³•ï¼Œå®ƒè·ŸTrieæ ‘çš„å…³ç³»ï¼Œå°±åƒå•æ¨¡å¼ä¸²ä¸­ï¼ŒKMPç®—æ³•ä¸BFç®—æ³•çš„å…³ç³»ä¸€æ ·ã€‚KMPç®—æ³•ä¸­æœ‰ä¸€ä¸ªéå¸¸å…³é”®çš„nextæ•°ç»„ï¼Œç±»æ¯”åˆ°ACè‡ªåŠ¨æœºä¸­å°±æ˜¯å¤±è´¥æŒ‡é’ˆã€‚è€Œä¸”ï¼ŒACè‡ªåŠ¨æœºå¤±è´¥æŒ‡é’ˆçš„æ„å»ºè¿‡ç¨‹ï¼Œè·ŸKMPç®—æ³•ä¸­è®¡ç®—nextæ•°ç»„æå…¶ç›¸ä¼¼ã€‚æ‰€ä»¥ï¼Œè¦ç†è§£ACè‡ªåŠ¨æœºï¼Œæœ€å¥½å…ˆæŒæ¡KMPç®—æ³•ï¼Œå› ä¸ºACè‡ªåŠ¨æœºå…¶å®å°±æ˜¯KMPç®—æ³•åœ¨å¤šæ¨¡å¼ä¸²ä¸Šçš„æ”¹é€ ã€‚</p><p>æ•´ä¸ªACè‡ªåŠ¨æœºç®—æ³•åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å°†å¤šä¸ªæ¨¡å¼ä¸²æ„å»ºæˆACè‡ªåŠ¨æœºï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯åœ¨ACè‡ªåŠ¨æœºä¸­åŒ¹é…ä¸»ä¸²ã€‚ç¬¬ä¸€éƒ¨åˆ†åˆåˆ†ä¸ºä¸¤ä¸ªå°çš„æ­¥éª¤ï¼Œä¸€ä¸ªæ˜¯å°†æ¨¡å¼ä¸²æ„å»ºæˆTrieæ ‘ï¼Œå¦ä¸€ä¸ªæ˜¯åœ¨Trieæ ‘ä¸Šæ„å»ºå¤±è´¥æŒ‡é’ˆã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•æˆ‘ä»¬å…¨éƒ½è®²å®Œäº†ï¼Œä½ èƒ½è¯•ç€åˆ†ææ€»ç»“ä¸€ä¸‹ï¼Œå„ä¸ªå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•çš„ç‰¹ç‚¹å’Œæ¯”è¾ƒé€‚åˆçš„åº”ç”¨åœºæ™¯å—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ï¼Œä¹Ÿæ¬¢è¿ç‚¹å‡»â€œ<span class="orange">è¯·æœ‹å‹è¯»</span>â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„å¥½å‹ï¼Œå’Œä»–ä¸€èµ·è®¨è®ºã€å­¦ä¹ ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8e/d3/8e603e3d795fc0ab2698f6f5eabf14d3.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">zixuan</span>
                            </div>
                            <div class="bd">æ€è€ƒé¢˜:<br>ä¸€ã€å•æ¨¡å¼ä¸²åŒ¹é…ï¼š<br>1. BFï¼š ç®€å•åœºæ™¯ï¼Œä¸»ä¸²å’Œæ¨¡å¼ä¸²éƒ½ä¸å¤ªé•¿, O(m*n)<br>2. KPï¼šå­—ç¬¦é›†èŒƒå›´ä¸è¦å¤ªå¤§ä¸”æ¨¡å¼ä¸²ä¸è¦å¤ªé•¿ï¼Œ å¦åˆ™hashå€¼å¯èƒ½å†²çªï¼ŒO(n)<br>3. naive-BMï¼šæ¨¡å¼ä¸²æœ€å¥½ä¸è¦å¤ªé•¿ï¼ˆå› ä¸ºé¢„å¤„ç†è¾ƒé‡ï¼‰ï¼Œæ¯”å¦‚IDEç¼–è¾‘å™¨é‡Œçš„æŸ¥æ‰¾åœºæ™¯ï¼› é¢„å¤„ç†O(m*m), åŒ¹é…O(n)ï¼Œ å®ç°è¾ƒå¤æ‚ï¼Œéœ€è¦è¾ƒå¤šé¢å¤–ç©ºé—´.<br>4. KMPï¼šé€‚åˆæ‰€æœ‰åœºæ™¯ï¼Œæ•´ä½“å®ç°èµ·æ¥ä¹Ÿæ¯”BMç®€å•ï¼ŒO(n+m)ï¼Œä»…éœ€ä¸€ä¸ªnextæ•°ç»„çš„O(n)é¢å¤–ç©ºé—´ï¼›ä½†ç»Ÿè®¡æ„ä¹‰ä¸‹ä¼¼ä¹BMæ›´å¿«ï¼ŒåŸå› ä¸æ˜.<br>5. å¦å¤–æŸ¥èµ„æ–™çš„æ—¶å€™è¿˜çœ‹åˆ°ä¸€ç§æ¯”BM&#47;KMPæ›´å¿«ï¼Œä¸”å®ç°+ç†è§£èµ·æ¥éƒ½æ›´å®¹æ˜“çš„çš„Sundayç®—æ³•ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹è¿™é‡Œ:<br>http:&#47;&#47;www.inf.fh-flensburg.de&#47;lang&#47;algorithmen&#47;pattern&#47;sundayen.htm<br>https:&#47;&#47;www.jianshu.com&#47;p&#47;2e6eb7386cd3<br><br>äºŒã€å¤šæ¨¡å¼ä¸²åŒ¹é…ï¼š<br>1. naive-Trie: é€‚åˆå¤šæ¨¡å¼ä¸²å…¬å…±å‰ç¼€è¾ƒå¤šçš„åŒ¹é…(O(n*k)) æˆ–è€… æ ¹æ®å…¬å…±å‰ç¼€è¿›è¡ŒæŸ¥æ‰¾(O(k))çš„åœºæ™¯ï¼Œæ¯”å¦‚æœç´¢æ¡†çš„è‡ªåŠ¨è¡¥å…¨æç¤º.<br>2. ACè‡ªåŠ¨æœº: é€‚åˆå¤§é‡æ–‡æœ¬ä¸­å¤šæ¨¡å¼ä¸²çš„ç²¾ç¡®åŒ¹é…æŸ¥æ‰¾, å¯ä»¥åˆ°O(n).<br>   <br></div>
                            <span class="time">2018-12-14 23:28</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/fc/3b/c6b5b64f.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">bboyå­™æ™¨æ°</span>
                            </div>
                            <div class="bd">åœ¨çœ‹kmpå’Œæœ¬èŠ‚çš„acè‡ªåŠ¨æœºï¼Œå¾ˆå¤šæ–‡å­—æè¿°æˆ‘ä¹Ÿç†è§£ä¸äº†ï¼Œäºæ˜¯æˆ‘å°±åœ¨çº¸ä¸Šç”»ä¸€äº›å…·ä½“çš„ä¾‹å­ï¼Œç„¶åæŒ‰ä»£ç ä¸€æ­¥æ­¥çš„debugä¸‹å»ï¼Œè™½ç„¶æ–¹æ³•ç¬¨ï¼Œä½†æ˜¯å¾ˆæœ‰åŠ©äºç†è§£ã€‚ <br></div>
                            <span class="time">2018-12-19 17:11</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/37/d0/d60767cf.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">geektime learn</span>
                            </div>
                            <div class="bd">æˆ‘åªæƒ³è¯´ï¼Œè€å¸ˆä½ çœŸç‰›X <br></div>
                            <span class="time">2018-12-14 11:26</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">zixuan</span>
                            </div>
                            <div class="bd">å‰é¢æ¿€åŠ¨è¯´é”™äº†å“ˆ ï¼Œè·ŸDATrieæ²¡æœ‰åŠæ¯›é’±å…³ç³»ï¼Œåè€…åªæ˜¯ä¸€ç§Trieçš„å…·ä½“å®ç°.<br>&quot;å…¶å®ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ ‘ä¸­ç›¸åŒæ·±åº¦çš„èŠ‚ç‚¹æ”¾åˆ°åŒä¸€å±‚ï¼Œé‚£ä¹ˆæŸä¸ªèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆåªæœ‰å¯èƒ½å‡ºç°åœ¨å®ƒæ‰€åœ¨å±‚çš„ä¸Šä¸€å±‚&quot;ï¼Œ è¿™é‡Œæ”¹æˆ &quot;é‚£ä¹ˆæŸä¸ªèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆåªæœ‰å¯èƒ½æŒ‡å‘æ¯”ä»–æ‰€åœ¨å±‚æ›´å°çš„å±‚æ•°çš„èŠ‚ç‚¹&quot; ä¼¼ä¹æ›´ç²¾ç¡®ï¼Œè™½ç„¶ä¾‹å­é‡Œåˆšå¥½éƒ½æ˜¯å·®ä¸€å±‚ï¼Œä½†å®é™…åº”è¯¥å¯ä»¥å¾€å‰è·¨å¤šå±‚çš„.<br>å’ŒKMPç®—æ³•ä¸€æ ·ï¼Œè¿™ä¸ªé€šè¿‡å±‚æ¬¡éå†æ¥ç¼–ç»‡failNodeæ•°ç»„çš„è¿‡ç¨‹éå¸¸ç²¾å¦™ï¼ŒçœŸçš„å°±åƒæ˜¯ç»‡ç½‘ä¸€æ ·ã€‚ <br></div>
                            <span class="time">2018-12-14 22:26</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/18/03/5a47f26b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Eid</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œå¦‚æœè¦æ·»åŠ æ¨¡å¼ä¸²ï¼Œæ€ä¹ˆæ”¹failæŒ‡é’ˆå•Šï¼Ÿ <br></div>
                            <span class="time">2018-12-14 17:38</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/4c/e7/28fb0ddb.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">roc</span>
                            </div>
                            <div class="bd">ç‹äº‰è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œæˆ‘å‰é¢çš„å†…å®¹æŒæ¡äº†æœ‰80%ï¼Œå¦‚æœä¸æ˜¯é¢è¯•ç®—æ³•å²—ï¼Œåº”è¯¥è¿˜ç®—è¿‡å…³å§ï¼Ÿ <br></div>
                            <span class="time">2018-12-14 17:16</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/1f/3b/173b6660.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ¶¦é‘«</span>
                            </div>
                            <div class="bd">çº¢é»‘æ ‘ã€KPMè·ŸACè‡ªåŠ¨æœºè¿™å‡ èŠ‚æœ‰ç‚¹è·Ÿä¸ä¸Šã€‚ã€‚ <br></div>
                            <span class="time">2018-12-14 14:52</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/cf/f4/c1f41ff7.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å´...</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæˆ‘è§‰å¾—å­¦ä½ è¿™ä¸ªè¯¾ä¹‹åé™¤äº†å­¦ä¹ æ–°çš„çŸ¥è¯†ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿè®©æˆ‘èƒ½å¤Ÿäº†è§£å¹³æ—¶é—´é‚£äº›å¸¸è§åº”ç”¨èƒŒåçš„æ“ä½œï¼Œæœ€å…³é”®çš„æ—¶å€™åœ¨æ¿€å‘æˆ‘çš„å¥½å¥‡å¿ƒï¼Œè®©æˆ‘èƒ½å¤Ÿå»æ€è€ƒé‚£äº›æŠ€æœ¯ã€‚å—¯â€¦â€¦æˆ‘è§‰å¾—å¾ˆå¤šæ—¶å€™å¥½å¥‡å¿ƒå°±æ˜¯å­¦å¥½çŸ¥è¯†çš„åŸºç¡€ <br></div>
                            <span class="time">2018-12-19 15:42</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/c2/2e/c4a527d9.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">blacknhole</span>
                            </div>
                            <div class="bd">ç»ˆäºå®Œå…¨çœ‹æ‡‚äº†ã€‚<br>æœ‰å‡ ä¸ªç–‘é—®ï¼š<br>1ï¼Œâ€œé¦–å…ˆ root çš„å¤±è´¥æŒ‡é’ˆä¸º NULLï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘è‡ªå·±ã€‚â€ååŠå¥æ˜¯ä¸å‡†ç¡®æˆ–é”™è¯¯çš„ï¼Œrootçš„å¤±è´¥æŒ‡é’ˆå¹¶éæŒ‡å‘è‡ªèº«ï¼Œå› ä¸ºrootä¸ç­‰äºnullã€‚<br>2ï¼Œâ€œå¦‚æœ p æŒ‡å‘çš„èŠ‚ç‚¹æœ‰ä¸€ä¸ªç­‰äº b[i] çš„å­èŠ‚ç‚¹ xâ€¦â€¦â€ä»¥åŠä¸‹æ–‡ä¸­æåˆ°çš„b[i]ï¼Œæ˜¯ç¬”è¯¯å—ï¼Ÿåº”è¯¥ä¸ºa[i]å§ï¼Œå› ä¸ºaæ‰æ˜¯ä¸»ä¸²ã€‚ <br></div>
                            <span class="time">2018-12-23 15:55</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/1e/a5/c0ab907d.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">O_o</span>
                            </div>
                            <div class="bd">åšå®‰å“å¼€å‘çš„ï¼Œå‰è¾¹å…¨éƒ¨éƒ½ç†è§£+å¯åŠ¨æ‰‹æ‰‹å†™ã€‚è·Ÿåˆ°æœ€è¿‘å‡ ç« æ„Ÿåˆ°é¢è¯•å¯èƒ½ç¡®å®ç”¨ä¸åˆ°è¿™äº›äº†ï¼Œå¹³æ—¶å·¥ä½œä¹Ÿç¡®å®ç”¨ä¸åˆ°äº†ã€‚æ„Ÿè°¢è€å¸ˆæœ€è¿‘çš„æˆè¯¾ï¼Œé€šä¿—æ˜“æ‡‚ï¼ <br></div>
                            <span class="time">2018-12-17 15:03</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘ å‰å®³ã€‚æœ€è¿‘è¿™å‡ è®²ä¸è®²çš„è¯ çŸ¥è¯†å°±æœ‰ç¼ºé™· ä½ å¯ä»¥ä¸ç”¨å¤ªè´¹åŠ²çœ‹æ‡‚ çŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿å°±è¡Œ </p>
                                <p class="reply-time">2018-12-18 09:55</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">zixuan</span>
                            </div>
                            <div class="bd">è¿™æ˜¯ä¸æ˜¯å°±æ˜¯Double Array Trie (DATrie)ï¼Ÿä¹‹å‰ä¸€ç›´çœ‹ä¸å¤ªç†è§£ï¼Œæ„Ÿè°¢è€å¸ˆè§£æƒ‘ã€‚<br>For More: https:&#47;&#47;linux.thai.net&#47;~thep&#47;datrie&#47; <br></div>
                            <span class="time">2018-12-14 11:49</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å´å®‡æ™¨</span>
                            </div>
                            <div class="bd">è¯·æ•™ä¸‹è€å¸ˆï¼Œç¬¬ä¸‰å¹…å›¾ï¼Œå¦‚æœæŠŠdæ¢æˆeï¼Œé‚£pcçš„å¤±è´¥æŒ‡é’ˆæ˜¯ä¸æ˜¯è¦æŒ‡å‘rootäº†ï¼Œä½†æ˜¯å’Œä¹‹å‰è¯´çš„åªä¼šæŒ‡å‘ä¸Šä¸€å±‚èŠ‚ç‚¹ä¸ä¸€æ ·å•Šï¼Œå¸Œæœ›è€å¸ˆè§£ç­”ä¸‹ <br></div>
                            <span class="time">2018-12-14 08:49</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¸æ˜¯æŒ‡å‘ä¸Šä¸€å±‚ è€Œæ˜¯ä¸Šå±‚ ä¸Šå‡ å±‚éƒ½æœ‰å“¦å¯èƒ½</p>
                                <p class="reply-time">2018-12-14 10:24</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/22/af/1a31bc11.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">The Sword of Damocles</span>
                            </div>
                            <div class="bd">çœ‹æ‡‚è¿™ä¸€ç¯‡çš„å‰æï¼Œæ˜¯çœ‹æ‡‚äº†å‰é¢çš„KMP å’Œ BMã€‚è¿™ä¿©å•ƒå¾—å¾ˆè´¹åŠ²ï¼Œä¸è¿‡æ‡‚äº†ä¹‹åï¼Œå†æ¥çœ‹è¿™ä¸ªå°±å¾ˆeasyäº†ï¼ˆåŒæ ·çš„æ€è·¯ï¼‰ <br></div>
                            <span class="time">2018-12-25 10:39</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°æƒ…ç»ª</span>
                            </div>
                            <div class="bd">ç‹è€å¸ˆï¼ŒbuildFailurePointeræ–¹æ³•ä¸­whileå¾ªç¯é‡Œé¢ifä¸­åº”è¯¥æ˜¯qc ï¼= null &amp;&amp; qc.data == pc.dataã€‚æ‚¨è¯´å‘¢ï¼Ÿ <br></div>
                            <span class="time">2018-12-24 14:39</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJicwphCoQ0S1DaibWNarUJq3DrGOeADY02AreVbKCLkm0PWJmZR0f1rMrrXDRzOwLCmIQbqeibQ4uHQ/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ¨±æ¡ƒå­77</span>
                            </div>
                            <div class="bd">æƒ³è¯·æ•™ä¸€ç‚¹ï¼šå³ä¾¿æ²¡æœ‰ACè‡ªåŠ¨æœºï¼Œå•çº¯Trieï¼Œä¹Ÿå¯ä»¥å¤šæ¨¡å¼åŒ¹é…å§ï¼Ÿå°±åƒä½ æ–‡ç« å¼€å§‹è¯´çš„é‚£æ ·ï¼Œæ— è®ºåŒ¹é…æˆä¸æˆåŠŸï¼Œä¸‹ä¸€ä¸ªä¸»ä¸²é‡Œçš„è¯ä»æ–°å¼€å§‹ï¼Œè€ŒæŒ‡å‘Trieçš„æŒ‡é’ˆä¹Ÿé‡æ–°æŒ‡å‘root. è¿™æ ·å¯ä»¥å—ï¼Ÿ<br><br>å¤šè°¢ã€‚ <br></div>
                            <span class="time">2018-12-20 17:15</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯ä»¥çš„</p>
                                <p class="reply-time">2018-12-21 09:55</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/e4/f0/82281239.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Ricky</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œå¦‚æœæ¨¡å¼ä¸²ä¸ºabcdå’Œdï¼Œé‚£abcdå¯¹åº”çš„dèŠ‚ç‚¹çš„failæŒ‡é’ˆåº”è¯¥æŒ‡å‘ç¬¬ä¸€å±‚çš„dï¼Œå¹¶éæ–‡ç« ä¸­æ‰€è¯´çš„å¯¹åº”çš„ä¸Šä¸€å±‚ <br></div>
                            <span class="time">2018-12-20 11:12</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¸Šå‡ å±‚ æˆ‘è¡¨è¿°çš„ä¸å¥½ æˆ‘æ”¹ä¸‹</p>
                                <p class="reply-time">2018-12-21 10:06</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/8c/54/deb19880.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">slvher</span>
                            </div>
                            <div class="bd">ã€Œå¦‚æœæˆ‘ä»¬æŠŠæ ‘ä¸­ç›¸åŒæ·±åº¦çš„èŠ‚ç‚¹æ”¾åˆ°åŒä¸€å±‚ï¼Œé‚£ä¹ˆæŸä¸ªèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆåªæœ‰å¯èƒ½å‡ºç°åœ¨å®ƒæ‰€åœ¨å±‚çš„ä¸Šä¸€å±‚ã€‚ã€<br><br>===========================<br>æ„Ÿè§‰è¿™é‡Œæœ‰äº›æ­§ä¹‰ï¼Œå¤±è´¥æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ä¸ä¸€å®šåªèƒ½åœ¨ä¸Šâ€œä¸€â€å±‚å§ï¼Ÿ<br><br>æ›´ä¸¥è°¨çš„è¯´æ³•åº”è¯¥æ˜¯ï¼šæŸèŠ‚ç‚¹çš„å¤±è´¥æŒ‡é’ˆåªå¯èƒ½å‡ºç°åœ¨æ·±åº¦å°äºå½“å‰èŠ‚ç‚¹æ·±åº¦çš„é‚£äº›å±‚ <br></div>
                            <span class="time">2018-12-19 11:17</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/ea/05/c0d8014d.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åˆ˜ç« å‘¨</span>
                            </div>
                            <div class="bd">æ„å»ºæŒ‡é’ˆå¤±è´¥å‡½æ•°ä¸­ï¼ŒAcNode q = p.fail;æŒ‰ç…§é€»è¾‘qä¸€ç›´æ˜¯nullï¼Œæ€ä¹ˆæŒ‡å‘å¦ä¸€ä¸ªæ¨¡å¼ä¸²ï¼Ÿè¯·è€å¸ˆè§£ç­”ä¸‹ã€‚ <br></div>
                            <span class="time">2018-12-17 19:34</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">qä¸ºå•¥ä¸€ç›´æ˜¯nullå‘¢</p>
                                <p class="reply-time">2018-12-18 09:45</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/40/10/b6bf3c3c.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">çº¯æ´çš„æ†æ¶</span>
                            </div>
                            <div class="bd">â€œzixuanâ€åŒå­¦çš„æ€»ç»“å¤ªåˆ°ä½äº†ï¼Œä¸ºäº†æ–¹ä¾¿å¤ä¹ ç›´æ¥ä¿å­˜åˆ°ç•™è¨€é‡Œã€‚ä»¥ä¸‹æ˜¯è½¬è¿°ã€‚<br><br>æ€è€ƒé¢˜:<br>ä¸€ã€å•æ¨¡å¼ä¸²åŒ¹é…ï¼š<br>1. BFï¼š ç®€å•åœºæ™¯ï¼Œä¸»ä¸²å’Œæ¨¡å¼ä¸²éƒ½ä¸å¤ªé•¿, O(m*n)<br>2. KPï¼šå­—ç¬¦é›†èŒƒå›´ä¸è¦å¤ªå¤§ä¸”æ¨¡å¼ä¸²ä¸è¦å¤ªé•¿ï¼Œ å¦åˆ™hashå€¼å¯èƒ½å†²çªï¼ŒO(n)<br>3. naive-BMï¼šæ¨¡å¼ä¸²æœ€å¥½ä¸è¦å¤ªé•¿ï¼ˆå› ä¸ºé¢„å¤„ç†è¾ƒé‡ï¼‰ï¼Œæ¯”å¦‚IDEç¼–è¾‘å™¨é‡Œçš„æŸ¥æ‰¾åœºæ™¯ï¼› é¢„å¤„ç†O(m*m), åŒ¹é…O(n)ï¼Œ å®ç°è¾ƒå¤æ‚ï¼Œéœ€è¦è¾ƒå¤šé¢å¤–ç©ºé—´ã€‚PSï¼šå¦‚æœç”¨åŠ¨æ€è§„åˆ’æ€æƒ³ä¼˜åŒ–é¢„å¤„ç†ç®—æ³•ï¼Œæ¨¡å¼ä¸²é•¿åº¦çš„ç“¶é¢ˆä¼šå¾—åˆ°å¾ˆå¤§ç¼“è§£ã€‚<br>4. KMPï¼šé€‚åˆæ‰€æœ‰åœºæ™¯ï¼Œæ•´ä½“å®ç°èµ·æ¥ä¹Ÿæ¯”BMç®€å•ï¼ŒO(n+m)ï¼Œä»…éœ€ä¸€ä¸ªnextæ•°ç»„çš„O(n)é¢å¤–ç©ºé—´ï¼›ä½†ç»Ÿè®¡æ„ä¹‰ä¸‹ä¼¼ä¹BMæ›´å¿«ï¼ŒåŸå› ä¸æ˜.<br>5. å¦å¤–æŸ¥èµ„æ–™çš„æ—¶å€™è¿˜çœ‹åˆ°ä¸€ç§æ¯”BM&#47;KMPæ›´å¿«ï¼Œä¸”å®ç°+ç†è§£èµ·æ¥éƒ½æ›´å®¹æ˜“çš„çš„Sundayç®—æ³•ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹è¿™é‡Œ:<br>http:&#47;&#47;www.inf.fh-flensburg.de&#47;lang&#47;algorithmen&#47;pattern&#47;sundayen.htm<br>https:&#47;&#47;www.jianshu.com&#47;p&#47;2e6eb7386cd3<br><br>äºŒã€å¤šæ¨¡å¼ä¸²åŒ¹é…ï¼š<br>1. naive-Trie: é€‚åˆå¤šæ¨¡å¼ä¸²å…¬å…±å‰ç¼€è¾ƒå¤šçš„åŒ¹é…(O(n*k)) æˆ–è€… æ ¹æ®å…¬å…±å‰ç¼€è¿›è¡ŒæŸ¥æ‰¾(O(k))çš„åœºæ™¯ï¼Œæ¯”å¦‚æœç´¢æ¡†çš„è‡ªåŠ¨è¡¥å…¨æç¤º.<br>2. ACè‡ªåŠ¨æœº: é€‚åˆå¤§é‡æ–‡æœ¬ä¸­å¤šæ¨¡å¼ä¸²çš„ç²¾ç¡®åŒ¹é…æŸ¥æ‰¾, å¯ä»¥åˆ°O(n). <br></div>
                            <span class="time">2018-12-15 22:40</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/0f/ab/9748f40b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¾®ç§’</span>
                            </div>
                            <div class="bd">å­—ç¬¦ä¸²è¿™éƒ¨åˆ†æ„Ÿè§‰å¥½ç¹æ‚ï¼Œè®¤çœŸçœ‹åº”è¯¥éƒ½èƒ½çœ‹æ‡‚ï¼Œå°±æ˜¯å¾ˆå®¹æ˜“å¿˜ï¼Œéœ€è¦ä¸æ–­çš„å¤ä¹ å·©å›ºçŸ¥è¯†ç‚¹æ‰è¡Œã€‚ <br></div>
                            <span class="time">2018-12-15 22:37</span>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>